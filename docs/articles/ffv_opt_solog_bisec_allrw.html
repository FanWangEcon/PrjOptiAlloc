<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Line by Line Test Log Linear Allocation Test â€¢ Optimal Allocation</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Line by Line Test Log Linear Allocation Test">
<meta property="og:description" content="Given allocation space parameters (A, alpha) for log linear regression, test log-linear optima allocation line by line.
The result is not included in the final version of the paper, because the results are not closed-form, but are based on a root search.
The root search is very fast when initial condition is zero.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-10"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92953468-10');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Optimal Allocation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Tutorials</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3839890" class="external-link">Optimal Allocations to Heterogeneous Agents with An Application to Stimulus Checks</a>
    </li>
    <li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3691091" class="external-link">Optimal Allocation of the COVID-19 Stimulus Checks</a>
    </li>
    <li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3547706" class="external-link">The Optimal Allocation of Resources among Heterogeneous Individuals</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Sites
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://fanwangecon.github.io/REconTools/" class="external-link">R Tools for Data and Optimization</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/R4Econ/" class="external-link">R Examples Data and Optimization</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stat4Econ/" class="external-link">R Examples Introductory Statistics</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stata4Econ/" class="external-link">Stata Examples Regressions and Tables</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/M4Econ/" class="external-link">Matlab Examples Matrix and Graphs</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Math4Econ/" class="external-link">Matlab Introductory Math for Econ</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Tex4Econ/" class="external-link">Latex and Paper Generation Examples</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/pyfan/" class="external-link">Python Examples</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fanwangecon/PrjOptiAlloc" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/fanwangecon" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="ffv_opt_solog_bisec_allrw_files/kePrint-0.0.1/kePrint.js"></script><link href="ffv_opt_solog_bisec_allrw_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Line by Line Test Log Linear Allocation Test</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/FanWangEcon/PrjOptiAlloc/blob/HEAD/vignettes/ffv_opt_solog_bisec_allrw.Rmd" class="external-link"><code>vignettes/ffv_opt_solog_bisec_allrw.Rmd</code></a></small>
      <div class="hidden name"><code>ffv_opt_solog_bisec_allrw.Rmd</code></div>

    </div>

    
    
<p>Given allocation space parameters (A, alpha) for log linear regression, test log-linear optima allocation line by line. The result is not included in the final version of the paper, because the results are not closed-form, but are based on a root search. The root search is very fast when initial condition is zero.</p>
<p>The objective of this file is to solve the log linear <span class="math inline">\(N_i\)</span> and <span class="math inline">\(H_i\)</span> problem without invoking any functions using bisection with the implicit solution derived in the paper.</p>
<p>File name <em>ffv_opt_solog_bisec_allrw</em>:</p>
<ul>
<li>
<em>opt</em>: optimal allocation project</li>
<li>
<em>solog</em>: log linear production function</li>
<li>
<em>bisec</em>: implicit formula solved via bisection</li>
<li>
<em>allrw</em>: all code line by line raw original file</li>
</ul>
<div class="section level2">
<h2 id="input-and-output">Input and Output<a class="anchor" aria-label="anchor" href="#input-and-output"></a>
</h2>
<p>There is a dataset with child attributes, nutritional inputs and outputs. Run regression to estimate some input output relationship first. Then generate required inputs for code.</p>
<ol style="list-style-type: decimal">
<li>Required Input</li>
</ol>
<ul>
<li>
<span class="citation">@param</span> df tibble data table including variables using svr names below each row is potentially an individual who will receive alternative allocations</li>
<li>
<span class="citation">@param</span> svr_A_i string name of the A_i variable, dot product of covariates and coefficients, TFP from log linear</li>
<li>
<span class="citation">@param</span> svr_alpha_i string name of the alpha_i variable, individual specific elasticity information, elasticity from log linear</li>
<li>
<span class="citation">@param</span> svr_beta_i string name of the beta_i variable, relative preference weight for each child</li>
<li>
<span class="citation">@param</span> svr_N_i string name of the vector of existing inputs, based on which to compute aggregate resource</li>
<li>
<span class="citation">@param</span> fl_N_hat float total resource avaible for allocation, if not specific, sum by svr_N_i</li>
<li>
<span class="citation">@param</span> fl_rho float preference for equality for the planner</li>
<li>
<span class="citation">@return</span> a dataframe that expands the df inputs with additional results, including bisection solution.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>The structure assumes some regression has already taken place to generate the i specific variables listed.</li>
</ol>
</div>
<div class="section level2">
<h2 id="load-packages-and-data">Load Packages and Data<a class="anchor" aria-label="anchor" href="#load-packages-and-data"></a>
</h2>
<div class="section level3">
<h3 id="load-dependencies">Load Dependencies<a class="anchor" aria-label="anchor" href="#load-dependencies"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span>all.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>knitr.duplicate.label <span class="op">=</span> <span class="st">'allow'</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fanwangecon.github.io/PrjOptiAlloc/">PrjOptiAlloc</a></span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/" class="external-link">knitr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="common-parameters">common parameters<a class="anchor" aria-label="anchor" href="#common-parameters"></a>
</h3>
<p>some important shared, common fixed parameters specify them here:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># which params to test</span>
<span class="va">it_test</span> <span class="op">=</span> <span class="fl">6</span>

<span class="co"># parameters</span>
<span class="va">fl_rho</span> <span class="op">=</span> <span class="fl">0.20</span>
<span class="va">svr_id_var</span> <span class="op">=</span> <span class="st">'indi_id'</span>

<span class="co"># it_child_count = n, the number of children</span>
<span class="va">it_n_child_cnt</span> <span class="op">=</span> <span class="fl">2</span>
<span class="co"># it_heter_param = q, number of parameters that are heterogeneous across children</span>
<span class="va">it_q_hetpa_cnt</span> <span class="op">=</span> <span class="fl">2</span>

<span class="co"># choice grid for nutritional feasible choices for each</span>
<span class="va">fl_n_agg</span> <span class="op">=</span> <span class="fl">100</span>
<span class="va">fl_n_min</span> <span class="op">=</span> <span class="fl">0</span>
<span class="va">it_n_choice_cnt_ttest</span> <span class="op">=</span> <span class="fl">3</span>
<span class="va">it_n_choice_cnt_dense</span> <span class="op">=</span> <span class="fl">100</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="a-and-alpha-input-matrix">a and alpha input matrix<a class="anchor" aria-label="anchor" href="#a-and-alpha-input-matrix"></a>
</h3>
<p>different types of <em>alpha</em> and <em>a</em> combinations. the algorithm, solutions should work for any alpha and a.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="va">it_test</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># A. test params 1</span>
  <span class="co"># these are initially what i tested with, positively correlated a and alpha, some have both higher tfp as well as elasticity.</span>
  <span class="va">ar_nn_a</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span>, length.out <span class="op">=</span> <span class="va">it_n_child_cnt</span><span class="op">)</span>
  <span class="va">ar_nn_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.9</span>, length.out <span class="op">=</span> <span class="va">it_n_child_cnt</span><span class="op">)</span>
  <span class="va">mt_nn_by_nq_a_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">it_test</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># B. test params 2</span>
  <span class="va">ar_nn_a</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>
  <span class="va">ar_nn_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>,<span class="fl">0.2</span><span class="op">)</span>
  <span class="va">mt_nn_by_nq_a_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">it_test</span> <span class="op">==</span> <span class="fl">3</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># C. test params 3</span>
  <span class="va">ar_nn_a</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>
  <span class="va">ar_nn_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>,<span class="fl">0.1</span><span class="op">)</span>
  <span class="va">mt_nn_by_nq_a_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">it_test</span> <span class="op">==</span> <span class="fl">4</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># D. test params 4</span>
  <span class="va">ar_nn_a</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span>
  <span class="va">ar_nn_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.006686704</span>,<span class="fl">0.009251407</span><span class="op">)</span>
  <span class="va">mt_nn_by_nq_a_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">it_test</span> <span class="op">==</span> <span class="fl">5</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># E. test params 5</span>
  <span class="va">ar_nn_a</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4.342501</span>, <span class="fl">4.359987</span><span class="op">)</span>
  <span class="va">ar_nn_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.006686704</span>,<span class="fl">0.009251407</span><span class="op">)</span>
  <span class="va">mt_nn_by_nq_a_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span><span class="op">)</span>
<span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">it_test</span> <span class="op">==</span> <span class="fl">6</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># graph b</span>
  <span class="co"># input group two, from the project</span>
  <span class="va">ls_opti_alpha_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ffy_opt_dtgch_cbem4.html">ffy_opt_dtgch_cbem4</a></span><span class="op">(</span><span class="op">)</span>
  <span class="va">df_esti</span> <span class="op">&lt;-</span> <span class="va">ls_opti_alpha_a</span><span class="op">$</span><span class="va">df_esti</span>
  <span class="va">df_dtgch_cbem4_bisec</span> <span class="op">&lt;-</span> <span class="va">df_esti</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'A_log'</span>, <span class="st">'alpha_log'</span><span class="op">)</span><span class="op">]</span>
  <span class="va">ar_nn_a</span> <span class="op">&lt;-</span> <span class="va">df_dtgch_cbem4_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">A_log</span><span class="op">)</span>
  <span class="va">ar_nn_alpha</span> <span class="op">&lt;-</span> <span class="va">df_dtgch_cbem4_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">alpha_log</span><span class="op">)</span>
  <span class="va">mt_nn_by_nq_a_alpha</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code><span class="co">## Warning: The `x` argument of `as_tibble.matrix()` must have unique column names if `.name_repair` is omitted as of tibble 2.0.0.</span>
<span class="co">## Using compatibility `.name_repair`.</span>
<span class="co">## <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span>
<span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="expand-matrix">expand matrix<a class="anchor" aria-label="anchor" href="#expand-matrix"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># choice grid for nutritional feasible choices for each</span>
<span class="va">it_n_choice_cnt_ttest</span> <span class="op">=</span> <span class="fl">3</span>
<span class="va">it_n_choice_cnt_dense</span> <span class="op">=</span> <span class="fl">100</span>
<span class="va">ar_n_choices_ttest</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">fl_n_min</span>, <span class="va">fl_n_agg</span>, length.out <span class="op">=</span> <span class="va">it_n_choice_cnt_ttest</span><span class="op">)</span>
<span class="va">ar_n_choices_dense</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">fl_n_min</span>, <span class="va">fl_n_agg</span>, length.out <span class="op">=</span> <span class="va">it_n_choice_cnt_dense</span><span class="op">)</span>

<span class="co"># mesh expand</span>
<span class="va">tb_states_choices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">mt_nn_by_nq_a_alpha</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rowid_to_column</a></span><span class="op">(</span>var<span class="op">=</span><span class="va">svr_id_var</span><span class="op">)</span>
<span class="va">tb_states_choices_ttest</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_n</a></span><span class="op">(</span><span class="fl">9</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span>choices <span class="op">=</span> <span class="va">ar_n_choices_ttest</span><span class="op">)</span>
<span class="va">tb_states_choices_dense</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html" class="external-link">sample_n</a></span><span class="op">(</span><span class="fl">9</span>, replace <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand_grid.html" class="external-link">expand_grid</a></span><span class="op">(</span>choices <span class="op">=</span> <span class="va">ar_n_choices_dense</span><span class="op">)</span>

<span class="co"># display</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tb_states_choices_dense</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     indi_id         ar_nn_a       ar_nn_alpha          choices   </span>
<span class="co">##  Min.   : 96.0   Min.   :4.304   Min.   :0.006687   Min.   :  0  </span>
<span class="co">##  1st Qu.:231.0   1st Qu.:4.321   1st Qu.:0.006687   1st Qu.: 25  </span>
<span class="co">##  Median :378.0   Median :4.331   Median :0.006687   Median : 50  </span>
<span class="co">##  Mean   :492.8   Mean   :4.332   Mean   :0.008172   Mean   : 50  </span>
<span class="co">##  3rd Qu.:720.0   3rd Qu.:4.334   3rd Qu.:0.009251   3rd Qu.: 75  </span>
<span class="co">##  Max.   :920.0   Max.   :4.372   Max.   :0.012090   Max.   :100</span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tb_states_choices_ttest</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
indi_id
</th>
<th style="text-align:right;">
ar_nn_a
</th>
<th style="text-align:right;">
ar_nn_alpha
</th>
<th style="text-align:right;">
choices
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
4.326523
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
4.326523
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
4.326523
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
4.325891
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
4.325891
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
4.325891
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
615
</td>
<td style="text-align:right;">
4.366037
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
615
</td>
<td style="text-align:right;">
4.366037
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
615
</td>
<td style="text-align:right;">
4.366037
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
4.341420
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
4.341420
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
4.341420
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
677
</td>
<td style="text-align:right;">
4.364739
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
677
</td>
<td style="text-align:right;">
4.364739
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
677
</td>
<td style="text-align:right;">
4.364739
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
690
</td>
<td style="text-align:right;">
4.350469
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
690
</td>
<td style="text-align:right;">
4.350469
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
690
</td>
<td style="text-align:right;">
4.350469
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
657
</td>
<td style="text-align:right;">
4.342073
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
657
</td>
<td style="text-align:right;">
4.342073
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
657
</td>
<td style="text-align:right;">
4.342073
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
707
</td>
<td style="text-align:right;">
4.331892
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
707
</td>
<td style="text-align:right;">
4.331892
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
707
</td>
<td style="text-align:right;">
4.331892
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
100
</td>
</tr>
<tr>
<td style="text-align:right;">
856
</td>
<td style="text-align:right;">
4.347273
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
856
</td>
<td style="text-align:right;">
4.347273
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:right;">
856
</td>
<td style="text-align:right;">
4.347273
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="apply-same-function-all-rows-some-inputs-row-specific-other-shared">Apply Same Function All Rows, some inputs row-specific, other shared<a class="anchor" aria-label="anchor" href="#apply-same-function-all-rows-some-inputs-row-specific-other-shared"></a>
</h2>
<div class="section level3">
<h3 id="points-and-denser-dataframs-and-define-function">3 points and denser dataframs and define function<a class="anchor" aria-label="anchor" href="#points-and-denser-dataframs-and-define-function"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># convert matrix to tibble</span>
<span class="va">ar_st_col_names</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">svr_id_var</span>,<span class="st">'fl_a'</span>, <span class="st">'fl_alpha'</span><span class="op">)</span>
<span class="va">tb_states_choices</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">rename_all</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ar_st_col_names</span><span class="op">)</span><span class="op">)</span>
<span class="va">ar_st_col_names</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">svr_id_var</span>,<span class="st">'fl_a'</span>, <span class="st">'fl_alpha'</span>, <span class="st">'fl_n'</span><span class="op">)</span>
<span class="va">tb_states_choices_ttest</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_ttest</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">rename_all</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ar_st_col_names</span><span class="op">)</span><span class="op">)</span>
<span class="va">tb_states_choices_dense</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_dense</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select_all.html" class="external-link">rename_all</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ar_st_col_names</span><span class="op">)</span><span class="op">)</span>

<span class="co"># define implicit function</span>
<span class="va">ffi_nonlin_dplyrdo</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">fl_a</span>, <span class="va">fl_alpha</span>, <span class="va">fl_n</span>, <span class="va">ar_a</span>, <span class="va">ar_alpha</span>, <span class="va">fl_n_agg</span>, <span class="va">fl_rho</span><span class="op">)</span><span class="op">{</span>
  <span class="co"># scalar value that are row-specific, in dataframe already: *fl_a*, *fl_alpha*, *fl_n*</span>
  <span class="co"># array and scalars not in dataframe, common all rows: *ar_a*, *ar_alpha*, *fl_n_agg*, *fl_rho*</span>

  <span class="co"># test parameters</span>
  <span class="co"># ar_a = ar_nn_a</span>
  <span class="co"># ar_alpha = ar_nn_alpha</span>
  <span class="co"># fl_n = 100</span>
  <span class="co"># fl_rho = -1</span>
  <span class="co"># fl_n_q = 10</span>

  <span class="co"># apply function</span>
  <span class="va">ar_p1_s1</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">(</span><span class="va">fl_a</span> <span class="op">-</span> <span class="va">ar_a</span><span class="op">)</span><span class="op">*</span><span class="va">fl_rho</span><span class="op">)</span>
  <span class="va">ar_p1_s2</span> <span class="op">=</span> <span class="op">(</span><span class="va">fl_alpha</span><span class="op">/</span><span class="va">ar_alpha</span><span class="op">)</span>
  <span class="va">ar_p1_s3</span> <span class="op">=</span> <span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">ar_alpha</span><span class="op">*</span><span class="va">fl_rho</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
  <span class="va">ar_p1</span> <span class="op">=</span> <span class="op">(</span><span class="va">ar_p1_s1</span><span class="op">*</span><span class="va">ar_p1_s2</span><span class="op">)</span><span class="op">^</span><span class="va">ar_p1_s3</span>
  <span class="va">ar_p2</span> <span class="op">=</span> <span class="va">fl_n</span><span class="op">^</span><span class="op">(</span><span class="op">(</span><span class="va">fl_alpha</span><span class="op">*</span><span class="va">fl_rho</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">ar_alpha</span><span class="op">*</span><span class="va">fl_rho</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
  <span class="va">ar_overall</span> <span class="op">=</span> <span class="va">ar_p1</span><span class="op">*</span><span class="va">ar_p2</span>
  <span class="va">fl_overall</span> <span class="op">=</span> <span class="va">fl_n_agg</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ar_overall</span><span class="op">)</span>

  <span class="kw"><a href="https://rdrr.io/r/base/function.html" class="external-link">return</a></span><span class="op">(</span><span class="va">fl_overall</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="evaluate-at-three-choice-points-and-show-table">evaluate at three choice points and show table<a class="anchor" aria-label="anchor" href="#evaluate-at-three-choice-points-and-show-table"></a>
</h3>
<p>in the example below, just show results evaluating over three choice points and show table.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># fl_a, fl_alpha are from columns of tb_nn_by_nq_a_alpha</span>
<span class="va">tb_states_choices_ttest_eval</span> <span class="op">=</span> <span class="va">tb_states_choices_ttest</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dplyr_eval <span class="op">=</span> <span class="fu">ffi_nonlin_dplyrdo</span><span class="op">(</span><span class="va">fl_a</span>, <span class="va">fl_alpha</span>, <span class="va">fl_n</span>,
                                                               <span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span>,
                                                               <span class="va">fl_n_agg</span>, <span class="va">fl_rho</span><span class="op">)</span><span class="op">)</span>
<span class="co"># show</span>
<span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tb_states_choices_ttest_eval</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html" class="external-link">kable_styling</a></span><span class="op">(</span>bootstrap_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:right;">
indi_id
</th>
<th style="text-align:right;">
fl_a
</th>
<th style="text-align:right;">
fl_alpha
</th>
<th style="text-align:right;">
fl_n
</th>
<th style="text-align:right;">
dplyr_eval
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
4.326523
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
4.326523
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-81070.60
</td>
</tr>
<tr>
<td style="text-align:right;">
299
</td>
<td style="text-align:right;">
4.326523
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-162341.95
</td>
</tr>
<tr>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
4.325891
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
4.325891
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-81080.90
</td>
</tr>
<tr>
<td style="text-align:right;">
637
</td>
<td style="text-align:right;">
4.325891
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-162362.56
</td>
</tr>
<tr>
<td style="text-align:right;">
615
</td>
<td style="text-align:right;">
4.366037
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
615
</td>
<td style="text-align:right;">
4.366037
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-38247.67
</td>
</tr>
<tr>
<td style="text-align:right;">
615
</td>
<td style="text-align:right;">
4.366037
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-76565.63
</td>
</tr>
<tr>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
4.341420
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
4.341420
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-44410.91
</td>
</tr>
<tr>
<td style="text-align:right;">
305
</td>
<td style="text-align:right;">
4.341420
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-88910.21
</td>
</tr>
<tr>
<td style="text-align:right;">
677
</td>
<td style="text-align:right;">
4.364739
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
677
</td>
<td style="text-align:right;">
4.364739
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-38257.65
</td>
</tr>
<tr>
<td style="text-align:right;">
677
</td>
<td style="text-align:right;">
4.364739
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-76585.58
</td>
</tr>
<tr>
<td style="text-align:right;">
690
</td>
<td style="text-align:right;">
4.350469
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
690
</td>
<td style="text-align:right;">
4.350469
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-38367.52
</td>
</tr>
<tr>
<td style="text-align:right;">
690
</td>
<td style="text-align:right;">
4.350469
</td>
<td style="text-align:right;">
0.0139396
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-76805.23
</td>
</tr>
<tr>
<td style="text-align:right;">
657
</td>
<td style="text-align:right;">
4.342073
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
657
</td>
<td style="text-align:right;">
4.342073
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-80818.00
</td>
</tr>
<tr>
<td style="text-align:right;">
657
</td>
<td style="text-align:right;">
4.342073
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-161836.44
</td>
</tr>
<tr>
<td style="text-align:right;">
707
</td>
<td style="text-align:right;">
4.331892
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
707
</td>
<td style="text-align:right;">
4.331892
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-44496.00
</td>
</tr>
<tr>
<td style="text-align:right;">
707
</td>
<td style="text-align:right;">
4.331892
</td>
<td style="text-align:right;">
0.0120902
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-89080.37
</td>
</tr>
<tr>
<td style="text-align:right;">
856
</td>
<td style="text-align:right;">
4.347273
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
100.00
</td>
</tr>
<tr>
<td style="text-align:right;">
856
</td>
<td style="text-align:right;">
4.347273
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
50
</td>
<td style="text-align:right;">
-80733.70
</td>
</tr>
<tr>
<td style="text-align:right;">
856
</td>
<td style="text-align:right;">
4.347273
</td>
<td style="text-align:right;">
0.0066867
</td>
<td style="text-align:right;">
100
</td>
<td style="text-align:right;">
-161667.73
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="evaluate-at-many-choice-points-and-show-graphically">evaluate at many choice points and show graphically<a class="anchor" aria-label="anchor" href="#evaluate-at-many-choice-points-and-show-graphically"></a>
</h3>
<p>same as above, but now we evaluate the function over the individuals at many choice points so that we can graph things out.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># fl_a, fl_alpha are from columns of tb_nn_by_nq_a_alpha</span>
<span class="va">tb_states_choices_dense_eval</span> <span class="op">=</span> <span class="va">tb_states_choices_dense</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dplyr_eval <span class="op">=</span> <span class="fu">ffi_nonlin_dplyrdo</span><span class="op">(</span><span class="va">fl_a</span>, <span class="va">fl_alpha</span>, <span class="va">fl_n</span>,
                                                               <span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span>,
                                                               <span class="va">fl_n_agg</span>, <span class="va">fl_rho</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># show</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">tb_states_choices_dense_eval</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 900   5</span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tb_states_choices_dense_eval</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     indi_id           fl_a          fl_alpha             fl_n    </span>
<span class="co">##  Min.   : 96.0   Min.   :4.304   Min.   :0.006687   Min.   :  0  </span>
<span class="co">##  1st Qu.:231.0   1st Qu.:4.321   1st Qu.:0.006687   1st Qu.: 25  </span>
<span class="co">##  Median :378.0   Median :4.331   Median :0.006687   Median : 50  </span>
<span class="co">##  Mean   :492.8   Mean   :4.332   Mean   :0.008172   Mean   : 50  </span>
<span class="co">##  3rd Qu.:720.0   3rd Qu.:4.334   3rd Qu.:0.009251   3rd Qu.: 75  </span>
<span class="co">##  Max.   :920.0   Max.   :4.372   Max.   :0.012090   Max.   :100  </span>
<span class="co">##    dplyr_eval     </span>
<span class="co">##  Min.   :-163091  </span>
<span class="co">##  1st Qu.:-104533  </span>
<span class="co">##  Median : -65839  </span>
<span class="co">##  Mean   : -70370  </span>
<span class="co">##  3rd Qu.: -32635  </span>
<span class="co">##  Max.   :    100</span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lineplot</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_dense_eval</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">fl_n</span>, y<span class="op">=</span><span class="va">dplyr_eval</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span> <span class="va">.</span> <span class="op">~</span> <span class="va">indi_id</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept<span class="op">=</span><span class="fl">0</span>, linetype<span class="op">=</span><span class="st">"dashed"</span>,
                color <span class="op">=</span> <span class="st">"red"</span>, size<span class="op">=</span><span class="fl">1</span><span class="op">)</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'evaluate non-linear functions to search for roots'</span>,
             x <span class="op">=</span> <span class="st">'x values'</span>,
             y <span class="op">=</span> <span class="st">'f(x)'</span>,
             caption <span class="op">=</span> <span class="st">'evaluating the function'</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## $x</span>
<span class="co">## [1] "x values"</span>
<span class="co">## </span>
<span class="co">## $y</span>
<span class="co">## [1] "f(x)"</span>
<span class="co">## </span>
<span class="co">## $title</span>
<span class="co">## [1] "evaluate non-linear functions to search for roots"</span>
<span class="co">## </span>
<span class="co">## $caption</span>
<span class="co">## [1] "evaluating the function"</span>
<span class="co">## </span>
<span class="co">## attr(,"class")</span>
<span class="co">## [1] "labels"</span></code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lineplot</span><span class="op">)</span></code></pre></div>
<p><img src="ffv_opt_solog_bisec_allrw_files/figure-html/graph%20many%20evaluations-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="dplyr-implementation-of-bisection">dplyr implementation of bisection<a class="anchor" aria-label="anchor" href="#dplyr-implementation-of-bisection"></a>
</h2>
<div class="section level3">
<h3 id="initialize-matrix">initialize matrix<a class="anchor" aria-label="anchor" href="#initialize-matrix"></a>
</h3>
<p>first, initialize the matrix with <span class="math inline">\(a_0\)</span> and <span class="math inline">\(b_0\)</span>, the initial min and max points:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># common prefix to make reshaping easier</span>
<span class="va">st_bisec_prefix</span> <span class="op">&lt;-</span> <span class="st">'bisec_'</span>
<span class="va">svr_a_lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'a_0'</span><span class="op">)</span>
<span class="va">svr_b_lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'b_0'</span><span class="op">)</span>
<span class="va">svr_fa_lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'fa_0'</span><span class="op">)</span>
<span class="va">svr_fb_lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'fb_0'</span><span class="op">)</span>

<span class="co"># add initial a and b</span>
<span class="va">tb_states_choices_bisec</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_a_lst</span><span class="op">)</span> <span class="op">:=</span> <span class="va">fl_n_min</span>, <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_b_lst</span><span class="op">)</span> <span class="op">:=</span> <span class="va">fl_n_agg</span><span class="op">)</span>

<span class="co"># evaluate function f(a_0) and f(b_0)</span>
<span class="va">tb_states_choices_bisec</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_fa_lst</span><span class="op">)</span> <span class="op">:=</span> <span class="fu">ffi_nonlin_dplyrdo</span><span class="op">(</span><span class="va">fl_a</span>, <span class="va">fl_alpha</span>, <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_a_lst</span><span class="op">)</span>,
                                                                          <span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span>,
                                                                          <span class="va">fl_n_agg</span>, <span class="va">fl_rho</span><span class="op">)</span>,
                                   <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_fb_lst</span><span class="op">)</span> <span class="op">:=</span> <span class="fu">ffi_nonlin_dplyrdo</span><span class="op">(</span><span class="va">fl_a</span>, <span class="va">fl_alpha</span>, <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_b_lst</span><span class="op">)</span>,
                                                                          <span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span>,
                                                                          <span class="va">fl_n_agg</span>, <span class="va">fl_rho</span><span class="op">)</span><span class="op">)</span>
<span class="co"># summarize</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 1043    7</span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     indi_id            fl_a          fl_alpha          bisec_a_0   bisec_b_0  </span>
<span class="co">##  Min.   :   1.0   Min.   :4.287   Min.   :0.006687   Min.   :0   Min.   :100  </span>
<span class="co">##  1st Qu.: 261.5   1st Qu.:4.334   1st Qu.:0.006687   1st Qu.:0   1st Qu.:100  </span>
<span class="co">##  Median : 522.0   Median :4.343   Median :0.012090   Median :0   Median :100  </span>
<span class="co">##  Mean   : 522.0   Mean   :4.343   Mean   :0.010321   Mean   :0   Mean   :100  </span>
<span class="co">##  3rd Qu.: 782.5   3rd Qu.:4.351   3rd Qu.:0.012090   3rd Qu.:0   3rd Qu.:100  </span>
<span class="co">##  Max.   :1043.0   Max.   :4.417   Max.   :0.013940   Max.   :0   Max.   :100  </span>
<span class="co">##    bisec_fa_0    bisec_fb_0     </span>
<span class="co">##  Min.   :100   Min.   :-163379  </span>
<span class="co">##  1st Qu.:100   1st Qu.:-161838  </span>
<span class="co">##  Median :100   Median : -89227  </span>
<span class="co">##  Mean   :100   Mean   :-114259  </span>
<span class="co">##  3rd Qu.:100   3rd Qu.: -88801  </span>
<span class="co">##  Max.   :100   Max.   : -76145</span></code></pre>
</div>
<div class="section level3">
<h3 id="iterate-and-solve-for-fp-update-fa-and-fb">iterate and solve for f(p), update f(a) and f(b)<a class="anchor" aria-label="anchor" href="#iterate-and-solve-for-fp-update-fa-and-fb"></a>
</h3>
<p>implement the dplyr based concurrent bisection algorithm.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># fl_tol = float tolerance criteria</span>
<span class="co"># it_tol = number of interations to allow at most</span>
<span class="va">fl_tol</span> <span class="op">&lt;-</span> <span class="fl">10</span><span class="op">^</span><span class="op">-</span><span class="fl">6</span>
<span class="va">it_tol</span> <span class="op">&lt;-</span> <span class="fl">100</span>
<span class="co"># fl_p_dist2zr = distance to zero to initalize</span>
<span class="va">fl_p_dist2zr</span> <span class="op">&lt;-</span> <span class="fl">1000</span>
<span class="va">it_cur</span> <span class="op">&lt;-</span> <span class="fl">0</span>
<span class="kw">while</span> <span class="op">(</span><span class="va">it_cur</span> <span class="op">&lt;=</span> <span class="va">it_tol</span> <span class="op">&amp;&amp;</span> <span class="va">fl_p_dist2zr</span> <span class="op">&gt;=</span> <span class="va">fl_tol</span> <span class="op">)</span> <span class="op">{</span>

  <span class="va">it_cur</span> <span class="op">&lt;-</span> <span class="va">it_cur</span> <span class="op">+</span> <span class="fl">1</span>

  <span class="co"># new variables</span>
  <span class="va">svr_a_cur</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'a_'</span>, <span class="va">it_cur</span><span class="op">)</span>
  <span class="va">svr_b_cur</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'b_'</span>, <span class="va">it_cur</span><span class="op">)</span>
  <span class="va">svr_fa_cur</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'fa_'</span>, <span class="va">it_cur</span><span class="op">)</span>
  <span class="va">svr_fb_cur</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">'fb_'</span>, <span class="va">it_cur</span><span class="op">)</span>

  <span class="co"># evaluate function f(a_0) and f(b_0)</span>
  <span class="co"># 1. generate p</span>
  <span class="co"># 2. generate f_p</span>
  <span class="co"># 3. generate f_p*f_a</span>
  <span class="va">tb_states_choices_bisec</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>p <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_a_lst</span><span class="op">)</span> <span class="op">+</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_b_lst</span><span class="op">)</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>f_p <span class="op">=</span> <span class="fu">ffi_nonlin_dplyrdo</span><span class="op">(</span><span class="va">fl_a</span>, <span class="va">fl_alpha</span>, <span class="va">p</span>,
                                                              <span class="va">ar_nn_a</span>, <span class="va">ar_nn_alpha</span>,
                                                              <span class="va">fl_n_agg</span>, <span class="va">fl_rho</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>f_p_t_f_a <span class="op">=</span> <span class="va">f_p</span><span class="op">*</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_fa_lst</span><span class="op">)</span><span class="op">)</span>
  <span class="co"># fl_p_dist2zr = sum(abs(p))</span>
  <span class="va">fl_p_dist2zr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">f_p</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

  <span class="co"># update a and b</span>
  <span class="va">tb_states_choices_bisec</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_a_cur</span><span class="op">)</span> <span class="op">:=</span>
                                       <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">f_p_t_f_a</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_a_lst</span><span class="op">)</span>,
                                                 <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">p</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_b_cur</span><span class="op">)</span> <span class="op">:=</span>
                                       <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">f_p_t_f_a</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="va">p</span>,
                                                 <span class="cn">TRUE</span> <span class="op">~</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_b_lst</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="co"># update f(a) and f(b)</span>
  <span class="va">tb_states_choices_bisec</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_fa_cur</span><span class="op">)</span> <span class="op">:=</span>
                                       <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">f_p_t_f_a</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_fa_lst</span><span class="op">)</span>,
                                                 <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">f_p</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
                              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_fb_cur</span><span class="op">)</span> <span class="op">:=</span>
                                       <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">f_p_t_f_a</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="va">f_p</span>,
                                                 <span class="cn">TRUE</span> <span class="op">~</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_fb_lst</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="co"># save from last</span>
  <span class="va">svr_a_lst</span> <span class="op">&lt;-</span> <span class="va">svr_a_cur</span>
  <span class="va">svr_b_lst</span> <span class="op">&lt;-</span> <span class="va">svr_b_cur</span>
  <span class="va">svr_fa_lst</span> <span class="op">&lt;-</span> <span class="va">svr_fa_cur</span>
  <span class="va">svr_fb_lst</span> <span class="op">&lt;-</span> <span class="va">svr_fb_cur</span>

  <span class="co"># summar current round</span>
  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'it_cur:'</span>, <span class="va">it_cur</span>, <span class="st">', fl_p_dist2zr:'</span>, <span class="va">fl_p_dist2zr</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="va">svr_a_cur</span>, <span class="va">svr_b_cur</span>, <span class="va">svr_fa_cur</span>, <span class="va">svr_fb_cur</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
<pre><code><span class="co">## [1] "it_cur:1, fl_p_dist2zr:57065.8515924507"</span>
<span class="co">## [1] "it_cur:2, fl_p_dist2zr:28476.0859665553"</span>
<span class="co">## [1] "it_cur:3, fl_p_dist2zr:14184.6282193769"</span>
<span class="co">## [1] "it_cur:4, fl_p_dist2zr:7040.60930196585"</span>
<span class="co">## [1] "it_cur:5, fl_p_dist2zr:3469.45353361675"</span>
<span class="co">## [1] "it_cur:6, fl_p_dist2zr:1684.30185106396"</span>
<span class="co">## [1] "it_cur:7, fl_p_dist2zr:791.938788974897"</span>
<span class="co">## [1] "it_cur:8, fl_p_dist2zr:345.863486789484"</span>
<span class="co">## [1] "it_cur:9, fl_p_dist2zr:122.878869797614"</span>
<span class="co">## [1] "it_cur:10, fl_p_dist2zr:30.3977559686063"</span>
<span class="co">## [1] "it_cur:11, fl_p_dist2zr:25.3181374761203"</span>
<span class="co">## [1] "it_cur:12, fl_p_dist2zr:12.0886419051021"</span>
<span class="co">## [1] "it_cur:13, fl_p_dist2zr:2.06815551406747"</span>
<span class="co">## [1] "it_cur:14, fl_p_dist2zr:4.89604753960856"</span>
<span class="co">## [1] "it_cur:15, fl_p_dist2zr:1.93331480031098"</span>
<span class="co">## [1] "it_cur:16, fl_p_dist2zr:0.614579561133518"</span>
<span class="co">## [1] "it_cur:17, fl_p_dist2zr:0.314081026590978"</span>
<span class="co">## [1] "it_cur:18, fl_p_dist2zr:0.207595932727363"</span>
<span class="co">## [1] "it_cur:19, fl_p_dist2zr:0.112869498156886"</span>
<span class="co">## [1] "it_cur:20, fl_p_dist2zr:0.0559799114586833"</span>
<span class="co">## [1] "it_cur:21, fl_p_dist2zr:0.027032944900061"</span>
<span class="co">## [1] "it_cur:22, fl_p_dist2zr:0.0132672918026609"</span>
<span class="co">## [1] "it_cur:23, fl_p_dist2zr:0.00680454432702988"</span>
<span class="co">## [1] "it_cur:24, fl_p_dist2zr:0.00333360097714742"</span>
<span class="co">## [1] "it_cur:25, fl_p_dist2zr:0.00168437455159884"</span>
<span class="co">## [1] "it_cur:26, fl_p_dist2zr:0.000848467303071653"</span>
<span class="co">## [1] "it_cur:27, fl_p_dist2zr:0.000427696340068737"</span>
<span class="co">## [1] "it_cur:28, fl_p_dist2zr:0.000218673312373287"</span>
<span class="co">## [1] "it_cur:29, fl_p_dist2zr:0.000108180725121156"</span>
<span class="co">## [1] "it_cur:30, fl_p_dist2zr:5.24326238874592e-05"</span>
<span class="co">## [1] "it_cur:31, fl_p_dist2zr:2.67010139017832e-05"</span>
<span class="co">## [1] "it_cur:32, fl_p_dist2zr:1.33128324107031e-05"</span>
<span class="co">## [1] "it_cur:33, fl_p_dist2zr:6.65284808581866e-06"</span>
<span class="co">## [1] "it_cur:34, fl_p_dist2zr:3.34008954068542e-06"</span>
<span class="co">## [1] "it_cur:35, fl_p_dist2zr:1.65812727955474e-06"</span>
<span class="co">## [1] "it_cur:36, fl_p_dist2zr:8.52063209322296e-07"</span></code></pre>
</div>
<div class="section level3">
<h3 id="reshape-wide-to-long-to-wide">Reshape wide to long to wide<a class="anchor" aria-label="anchor" href="#reshape-wide-to-long-to-wide"></a>
</h3>
<div class="section level4">
<h4 id="table-onevery-wide">Table Oneâ€“very wide<a class="anchor" aria-label="anchor" href="#table-onevery-wide"></a>
</h4>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec</span>, <span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 x 154</span></span>
<span class="co">## <span style="color: #949494;"># Rowwise: </span></span>
<span class="co">##    indi_id  fl_a fl_alpha bisec_a_0 bisec_b_0 bisec_fa_0 bisec_fb_0      p</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>       1  4.34  0.006<span style="text-decoration: underline;">69</span>         0       100        100   -<span style="color: #BB0000; text-decoration: underline;">161</span><span style="color: #BB0000;">823.</span> 0.062<span style="text-decoration: underline;">2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>       2  4.36  0.009<span style="text-decoration: underline;">25</span>         0       100        100   -<span style="color: #BB0000; text-decoration: underline;">116</span><span style="color: #BB0000;">164.</span> 0.086<span style="text-decoration: underline;">2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>       3  4.35  0.009<span style="text-decoration: underline;">25</span>         0       100        100   -<span style="color: #BB0000; text-decoration: underline;">116</span><span style="color: #BB0000;">436.</span> 0.086<span style="text-decoration: underline;">0</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>       4  4.37  0.013<span style="text-decoration: underline;">9</span>          0       100        100    -<span style="color: #BB0000; text-decoration: underline;">76</span><span style="color: #BB0000;">535.</span> 0.130 </span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>       5  4.34  0.006<span style="text-decoration: underline;">69</span>         0       100        100   -<span style="color: #BB0000; text-decoration: underline;">162</span><span style="color: #BB0000;">038.</span> 0.062<span style="text-decoration: underline;">1</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>       6  4.36  0.013<span style="text-decoration: underline;">9</span>          0       100        100    -<span style="color: #BB0000; text-decoration: underline;">76</span><span style="color: #BB0000;">706.</span> 0.130 </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>       7  4.34  0.006<span style="text-decoration: underline;">69</span>         0       100        100   -<span style="color: #BB0000; text-decoration: underline;">162</span><span style="color: #BB0000;">025.</span> 0.062<span style="text-decoration: underline;">1</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>       8  4.34  0.006<span style="text-decoration: underline;">69</span>         0       100        100   -<span style="color: #BB0000; text-decoration: underline;">161</span><span style="color: #BB0000;">980.</span> 0.062<span style="text-decoration: underline;">1</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>       9  4.36  0.013<span style="text-decoration: underline;">9</span>          0       100        100    -<span style="color: #BB0000; text-decoration: underline;">76</span><span style="color: #BB0000;">632.</span> 0.130 </span>
<span class="co">## <span style="color: #BCBCBC;">10</span>      10  4.33  0.012<span style="text-decoration: underline;">1</span>          0       100        100    -<span style="color: #BB0000; text-decoration: underline;">89</span><span style="color: #BB0000;">034.</span> 0.112 </span>
<span class="co">## <span style="color: #949494;"># ... with 146 more variables: f_p &lt;dbl&gt;, f_p_t_f_a &lt;dbl&gt;, bisec_a_1 &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   bisec_b_1 &lt;dbl&gt;, bisec_fa_1 &lt;dbl&gt;, bisec_fb_1 &lt;dbl&gt;, bisec_a_2 &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   bisec_b_2 &lt;dbl&gt;, bisec_fa_2 &lt;dbl&gt;, bisec_fb_2 &lt;dbl&gt;, bisec_a_3 &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   bisec_b_3 &lt;dbl&gt;, bisec_fa_3 &lt;dbl&gt;, bisec_fb_3 &lt;dbl&gt;, bisec_a_4 &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   bisec_b_4 &lt;dbl&gt;, bisec_fa_4 &lt;dbl&gt;, bisec_fb_4 &lt;dbl&gt;, bisec_a_5 &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   bisec_b_5 &lt;dbl&gt;, bisec_fa_5 &lt;dbl&gt;, bisec_fb_5 &lt;dbl&gt;, bisec_a_6 &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   bisec_b_6 &lt;dbl&gt;, bisec_fa_6 &lt;dbl&gt;, bisec_fb_6 &lt;dbl&gt;, bisec_a_7 &lt;dbl&gt;, ...</span></span></code></pre>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'input allocated total sum: '</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] "input allocated total sum: 100.000000033469"</span></code></pre>
</div>
<div class="section level4">
<h4 id="table-twovery-wide-to-very-long">Table Twoâ€“very wide to very long<a class="anchor" aria-label="anchor" href="#table-twovery-wide-to-very-long"></a>
</h4>
<p>we want to treat the iteration count information that is the suffix of variable names as a variable by itself. additionally, we want to treat the a,b,fa,fb as a variable. structuring the data very long like this allows for easy graphing and other types of analysis. rather than dealing with many many variables, we have only 3 core variables that store bisection iteration information.</p>
<p>here we use the very nice <em>pivot_longer</em> function. note that to achieve this, we put a common prefix in front of the variables we wanted to convert to long. this is helpful, because we can easily identify which variables need to be reshaped.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># new variables</span>
<span class="va">svr_bisect_iter</span> <span class="op">&lt;-</span> <span class="st">'biseciter'</span>
<span class="va">svr_abfafb_long_name</span> <span class="op">&lt;-</span> <span class="st">'varname'</span>
<span class="va">svr_number_col</span> <span class="op">&lt;-</span> <span class="st">'value'</span>
<span class="va">svr_id_bisect_iter</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">svr_id_var</span>, <span class="st">'_bisect_ier'</span><span class="op">)</span>

<span class="co"># pivot wide to very long</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
<span class="va">tb_states_choices_bisec_long</span> <span class="op">&lt;-</span> 
  <span class="va">tb_states_choices_bisec</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">9</span>, replace<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>,<span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>
    cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span><span class="op">)</span>,
    names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">svr_abfafb_long_name</span>, <span class="va">svr_bisect_iter</span><span class="op">)</span>,
    names_pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">st_bisec_prefix</span>, <span class="st">"(.*)_(.*)"</span><span class="op">)</span>,
    values_to <span class="op">=</span> <span class="va">svr_number_col</span>
  <span class="op">)</span>

<span class="co"># print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec_long</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     indi_id           fl_a          fl_alpha              p          </span>
<span class="co">##  Min.   :179.0   Min.   :4.330   Min.   :0.006687   Min.   :0.06205  </span>
<span class="co">##  1st Qu.:415.0   1st Qu.:4.333   1st Qu.:0.009251   1st Qu.:0.08607  </span>
<span class="co">##  Median :526.0   Median :4.350   Median :0.012090   Median :0.11231  </span>
<span class="co">##  Mean   :521.3   Mean   :4.346   Mean   :0.011396   Mean   :0.10591  </span>
<span class="co">##  3rd Qu.:665.0   3rd Qu.:4.356   3rd Qu.:0.013940   3rd Qu.:0.12969  </span>
<span class="co">##  Max.   :938.0   Max.   :4.361   Max.   :0.013940   Max.   :0.12983  </span>
<span class="co">##       f_p               f_p_t_f_a            varname         </span>
<span class="co">##  Min.   :-1.383e-06   Min.   :-1.334e-12   Length:1332       </span>
<span class="co">##  1st Qu.:-8.178e-07   1st Qu.:-4.099e-13   Class :character  </span>
<span class="co">##  Median :-1.467e-07   Median :-1.525e-13   Mode  :character  </span>
<span class="co">##  Mean   :-3.205e-07   Mean   : 1.368e-13                     </span>
<span class="co">##  3rd Qu.: 1.672e-07   3rd Qu.: 2.153e-13                     </span>
<span class="co">##  Max.   : 1.022e-06   Max.   : 3.444e-12                     </span>
<span class="co">##   biseciter             value           </span>
<span class="co">##  Length:1332        Min.   :-162130.75  </span>
<span class="co">##  Class :character   1st Qu.:      0.00  </span>
<span class="co">##  Mode  :character   Median :      0.06  </span>
<span class="co">##                     Mean   :  -1374.64  </span>
<span class="co">##                     3rd Qu.:      0.13  </span>
<span class="co">##                     Max.   :    100.00</span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="st">'p'</span>,<span class="st">'f_p'</span>,<span class="st">'f_p_t_f_a'</span><span class="op">)</span><span class="op">)</span>, <span class="fl">30</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 30 x 6</span></span>
<span class="co">##    indi_id  fl_a fl_alpha varname biseciter    value</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> a       0               0 </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> b       0             100 </span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> fa      0             100 </span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> fb      0         -<span style="color: #BB0000; text-decoration: underline;">162</span><span style="color: #BB0000;">131.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> a       1               0 </span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> b       1              50 </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> fa      1             100 </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> fb      1          -<span style="color: #BB0000; text-decoration: underline;">80</span><span style="color: #BB0000;">965.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> a       2               0 </span>
<span class="co">## <span style="color: #BCBCBC;">10</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> b       2              25 </span>
<span class="co">## <span style="color: #949494;"># ... with 20 more rows</span></span></code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="st">'p'</span>,<span class="st">'f_p'</span>,<span class="st">'f_p_t_f_a'</span><span class="op">)</span><span class="op">)</span>, <span class="fl">30</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 30 x 6</span></span>
<span class="co">##    indi_id  fl_a fl_alpha varname biseciter      value</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> fa      29         0.000<span style="text-decoration: underline;">061</span>0</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> fb      29        -<span style="color: #BB0000;">0.000</span><span style="color: #BB0000; text-decoration: underline;">105</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> a       30         0.112    </span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> b       30         0.112    </span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> fa      30         0.000<span style="text-decoration: underline;">061</span>0</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> fb      30        -<span style="color: #BB0000;">0.000</span><span style="color: #BB0000; text-decoration: underline;">022</span><span style="color: #BB0000;">2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> a       31         0.112    </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> b       31         0.112    </span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> fa      31         0.000<span style="text-decoration: underline;">019</span>4</span>
<span class="co">## <span style="color: #BCBCBC;">10</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> fb      31        -<span style="color: #BB0000;">0.000</span><span style="color: #BB0000; text-decoration: underline;">022</span><span style="color: #BB0000;">2</span></span>
<span class="co">## <span style="color: #949494;"># ... with 20 more rows</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="table-twovery-very-long-to-wider-again">Table Twoâ€“very very long to wider again<a class="anchor" aria-label="anchor" href="#table-twovery-very-long-to-wider-again"></a>
</h4>
<p>but the previous results are too long, with the a, b, fa, and fb all in one column as different categories, they are really not different categories, they are in fact different types of variables. so we want to spread those four categories of this variable into four columns, each one representing the a, b, fa, and fb values. the rows would then be uniquly identified by the iteration counter and individual id.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># pivot wide to very long to a little wide</span>
<span class="va">tb_states_choices_bisec_wider</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_bisec_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>
    names_from <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_abfafb_long_name</span><span class="op">)</span>,
    values_from <span class="op">=</span> <span class="va">svr_number_col</span>
  <span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Note: Using an external vector in selections is ambiguous.</span>
<span class="co">## <span style="color: #0000BB;">i</span> Use `all_of(svr_number_col)` instead of `svr_number_col` to silence this message.</span>
<span class="co">## <span style="color: #0000BB;">i</span> See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</span>
<span class="co">## <span style="color: #555555;">This message is displayed once per session.</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec_wider</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     indi_id           fl_a          fl_alpha              p          </span>
<span class="co">##  Min.   :179.0   Min.   :4.330   Min.   :0.006687   Min.   :0.06205  </span>
<span class="co">##  1st Qu.:415.0   1st Qu.:4.333   1st Qu.:0.009251   1st Qu.:0.08607  </span>
<span class="co">##  Median :526.0   Median :4.350   Median :0.012090   Median :0.11231  </span>
<span class="co">##  Mean   :521.3   Mean   :4.346   Mean   :0.011396   Mean   :0.10591  </span>
<span class="co">##  3rd Qu.:665.0   3rd Qu.:4.356   3rd Qu.:0.013940   3rd Qu.:0.12969  </span>
<span class="co">##  Max.   :938.0   Max.   :4.361   Max.   :0.013940   Max.   :0.12983  </span>
<span class="co">##       f_p               f_p_t_f_a           biseciter               a          </span>
<span class="co">##  Min.   :-1.383e-06   Min.   :-1.334e-12   Length:333         Min.   :0.00000  </span>
<span class="co">##  1st Qu.:-8.178e-07   1st Qu.:-4.099e-13   Class :character   1st Qu.:0.00000  </span>
<span class="co">##  Median :-1.467e-07   Median :-1.525e-13   Mode  :character   Median :0.08607  </span>
<span class="co">##  Mean   :-3.205e-07   Mean   : 1.368e-13                      Mean   :0.07498  </span>
<span class="co">##  3rd Qu.: 1.672e-07   3rd Qu.: 2.153e-13                      3rd Qu.:0.12817  </span>
<span class="co">##  Max.   : 1.022e-06   Max.   : 3.444e-12                      Max.   :0.12983  </span>
<span class="co">##        b                   fa                  fb            </span>
<span class="co">##  Min.   :  0.06205   Min.   :  0.00000   Min.   :-162130.75  </span>
<span class="co">##  1st Qu.:  0.11195   1st Qu.:  0.00033   1st Qu.:   -126.98  </span>
<span class="co">##  Median :  0.12969   Median :  0.15876   Median :     -0.09  </span>
<span class="co">##  Mean   :  5.48039   Mean   : 29.47787   Mean   :  -5533.61  </span>
<span class="co">##  3rd Qu.:  0.19531   3rd Qu.:100.00000   3rd Qu.:      0.00  </span>
<span class="co">##  Max.   :100.00000   Max.   :100.00000   Max.   :      0.00</span></code></pre>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec_wider</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="st">'p'</span>,<span class="st">'f_p'</span>,<span class="st">'f_p_t_f_a'</span><span class="op">)</span><span class="op">)</span>, <span class="fl">30</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 30 x 8</span></span>
<span class="co">##    indi_id  fl_a fl_alpha biseciter     a       b    fa       fb</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 0             0 100       100 -<span style="color: #BB0000; text-decoration: underline;">162</span><span style="color: #BB0000;">131.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 1             0  50       100  -<span style="color: #BB0000; text-decoration: underline;">80</span><span style="color: #BB0000;">965.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 2             0  25       100  -<span style="color: #BB0000; text-decoration: underline;">40</span><span style="color: #BB0000;">407.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 3             0  12.5     100  -<span style="color: #BB0000; text-decoration: underline;">20</span><span style="color: #BB0000;">141.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 4             0   6.25    100  -<span style="color: #BB0000; text-decoration: underline;">10</span><span style="color: #BB0000;">014.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 5             0   3.12    100   -<span style="color: #BB0000; text-decoration: underline;">4</span><span style="color: #BB0000;">954.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 6             0   1.56    100   -<span style="color: #BB0000; text-decoration: underline;">2</span><span style="color: #BB0000;">425.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 7             0   0.781   100   -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">162.</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 8             0   0.391   100    -<span style="color: #BB0000;">531.</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>     415  4.33  0.006<span style="text-decoration: underline;">69</span> 9             0   0.195   100    -<span style="color: #BB0000;">215.</span></span>
<span class="co">## <span style="color: #949494;"># ... with 20 more rows</span></span></code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">tb_states_choices_bisec_wider</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="st">'p'</span>,<span class="st">'f_p'</span>,<span class="st">'f_p_t_f_a'</span><span class="op">)</span><span class="op">)</span>, <span class="fl">30</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 30 x 8</span></span>
<span class="co">##    indi_id  fl_a fl_alpha biseciter      a     b      fa       fb</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 7         0      0.781 100     -<span style="color: #BB0000;">598.</span>   </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 8         0      0.391 100     -<span style="color: #BB0000;">249.</span>   </span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 9         0      0.195 100      -<span style="color: #BB0000;">74.4</span>  </span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 10        0.097<span style="text-decoration: underline;">7</span> 0.195  12.8    -<span style="color: #BB0000;">74.4</span>  </span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 11        0.097<span style="text-decoration: underline;">7</span> 0.146  12.8    -<span style="color: #BB0000;">30.8</span>  </span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 12        0.097<span style="text-decoration: underline;">7</span> 0.122  12.8     -<span style="color: #BB0000;">9.04</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 13        0.110  0.122   1.86    -<span style="color: #BB0000;">9.04</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 14        0.110  0.116   1.86    -<span style="color: #BB0000;">3.59</span> </span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 15        0.110  0.113   1.86    -<span style="color: #BB0000;">0.863</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>     709  4.33   0.012<span style="text-decoration: underline;">1</span> 16        0.111  0.113   0.499   -<span style="color: #BB0000;">0.863</span></span>
<span class="co">## <span style="color: #949494;"># ... with 20 more rows</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="graph-bisection-iteration-results">Graph Bisection Iteration results<a class="anchor" aria-label="anchor" href="#graph-bisection-iteration-results"></a>
</h3>
<p>actually we want to graph based on the long results, not the wider. wider easier to view in table.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># graph results</span>
<span class="va">lineplot</span> <span class="op">&lt;-</span> <span class="va">tb_states_choices_bisec_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_bisect_iter</span><span class="op">)</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_bisect_iter</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_abfafb_long_name</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a'</span>, <span class="st">'b'</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_bisect_iter</span><span class="op">)</span>, y<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_number_col</span><span class="op">)</span>,
               colour<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_abfafb_long_name</span><span class="op">)</span>,
               linetype<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_abfafb_long_name</span><span class="op">)</span>,
               shape<span class="op">=</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_abfafb_long_name</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span> <span class="op">~</span> <span class="va">indi_id</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
        <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">'bisection iteration over individuals until convergence'</span>,
             x <span class="op">=</span> <span class="st">'bisection iteration'</span>,
             y <span class="op">=</span> <span class="st">'a (left side point) and b (right side point) values'</span>,
             caption <span class="op">=</span> <span class="st">'dplyr concurrent bisection nonlinear multple individuals'</span><span class="op">)</span> <span class="op">+</span>
      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lineplot</span><span class="op">)</span></code></pre></div>
<p><img src="ffv_opt_solog_bisec_allrw_files/figure-html/reshape%20solution%20for%20graphing-1.png" width="700" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://fanwangecon.github.io" class="external-link">Fan Wang</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
