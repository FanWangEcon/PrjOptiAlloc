<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Line by Line Test Bounded-Continuous Function with Height Nutrition Data â€¢ Optimal Allocation</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Line by Line Test Bounded-Continuous Function with Height Nutrition Data">
<meta property="og:description" content="Given allocation space parameters (A, alpha), test the lower-bounded continuous optimal allocation line by line without function.
This demonstrates relative optimality conditions, inverse optimal allocation, and optimal allocation.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-10"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92953468-10');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Optimal Allocation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Tutorials</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3839890" class="external-link">Optimal Allocations to Heterogeneous Agents with An Application to Stimulus Checks</a>
    </li>
    <li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3691091" class="external-link">Optimal Allocation of the COVID-19 Stimulus Checks</a>
    </li>
    <li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3547706" class="external-link">The Optimal Allocation of Resources among Heterogeneous Individuals</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Sites
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://fanwangecon.github.io/REconTools/" class="external-link">R Tools for Data and Optimization</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/R4Econ/" class="external-link">R Examples Data and Optimization</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stat4Econ/" class="external-link">R Examples Introductory Statistics</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stata4Econ/" class="external-link">Stata Examples Regressions and Tables</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/M4Econ/" class="external-link">Matlab Examples Matrix and Graphs</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Math4Econ/" class="external-link">Matlab Introductory Math for Econ</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Tex4Econ/" class="external-link">Latex and Paper Generation Examples</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/pyfan/" class="external-link">Python Examples</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fanwangecon/PrjOptiAlloc" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/fanwangecon" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Line by Line Test Bounded-Continuous Function with Height Nutrition Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/FanWangEcon/PrjOptiAlloc/blob/HEAD/vignettes/ffv_opt_solin_relow.Rmd" class="external-link"><code>vignettes/ffv_opt_solin_relow.Rmd</code></a></small>
      <div class="hidden name"><code>ffv_opt_solin_relow.Rmd</code></div>

    </div>

    
    
<p>Given allocation space parameters (A, alpha), test the lower-bounded continuous optimal allocation line by line without function. This demonstrates relative optimality conditions, inverse optimal allocation, and optimal allocation.</p>
<p>Solves the linear optimal allocation problem. Each individual receives input <span class="math inline">\(N_i\)</span>, and we are interested in individual expected outcomes <span class="math inline">\(H_i\)</span>. Production functions or reduced causal form relationships are linear with individual specific slopes and intercepts. Solve for different planners.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span>all.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>knitr.duplicate.label <span class="op">=</span> <span class="st">'allow'</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span>

<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fanwangecon.github.io/REconTools/" class="external-link">REconTools</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fanwangecon.github.io/PrjOptiAlloc/">PrjOptiAlloc</a></span><span class="op">)</span>

<span class="va">bl_save_rda</span> <span class="op">=</span> <span class="cn">FALSE</span></code></pre></div>
<div class="section level2">
<h2 id="load-data">Load Data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<p>Load data that is generated by regression <a href="https://fanwangecon.github.io/PrjOptiAlloc/reference/ffy_opt_dtgch_cbem4.html">ffy_opt_dtgch_cbem4</a> (<a href="https://fanwangecon.github.io/PrjOptiAlloc/articles/ffv_opt_dtgch_cbem4.html">vignette</a>).</p>
<p>Alternatively, provide hand input data.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bl_save_rda</span> <span class="op">=</span> <span class="cn">FALSE</span>

<span class="va">it_data_which</span> <span class="op">=</span> <span class="fl">2</span>

<span class="kw">if</span> <span class="op">(</span><span class="va">it_data_which</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># the data here has very little heterogeneity in alpha</span>
  <span class="co"># Load Library</span>
  <span class="va">ls_opti_alpha_A</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ffy_opt_dtgch_cbem4.html">ffy_opt_dtgch_cbem4</a></span><span class="op">(</span><span class="op">)</span>
  <span class="va">df_raw</span> <span class="op">&lt;-</span> <span class="va">ls_opti_alpha_A</span><span class="op">$</span><span class="va">df_raw</span>
  <span class="va">df_hw_cebu_m24</span> <span class="op">&lt;-</span> <span class="va">df_raw</span>
  <span class="va">df_esti</span> <span class="op">&lt;-</span> <span class="va">ls_opti_alpha_A</span><span class="op">$</span><span class="va">df_esti</span>

  <span class="co"># Review dataframes</span>
  <span class="co"># raw file</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_raw</span>, <span class="fl">10</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_esti</span>, <span class="fl">10</span><span class="op">)</span>
  <span class="va">ar_prot_data</span> <span class="op">=</span> <span class="va">df_hw_cebu_m24</span><span class="op">$</span><span class="va">prot</span>
  <span class="va">fl_N_agg</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ar_prot_data</span><span class="op">)</span>

  <span class="co"># Attach</span>
  <span class="kw"><a href="https://rdrr.io/r/base/attach.html" class="external-link">attach</a></span><span class="op">(</span><span class="va">df_raw</span><span class="op">)</span>
<span class="op">}</span>

<span class="kw">if</span> <span class="op">(</span><span class="va">it_data_which</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># generate 50 individuals with arbitrary A, alpha and beta</span>
  <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span>
  <span class="va">it_N</span> <span class="op">&lt;-</span> <span class="fl">50</span>
  <span class="va">ar_alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">it_N</span>, min<span class="op">=</span><span class="fl">0.1</span>, max<span class="op">=</span><span class="fl">1</span><span class="op">)</span>
  <span class="va">ar_A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">it_N</span>, min<span class="op">=</span><span class="fl">1</span>, max<span class="op">=</span><span class="fl">2</span><span class="op">)</span>
  <span class="va">ar_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="va">it_N</span>, min<span class="op">=</span><span class="fl">0</span>, max<span class="op">=</span><span class="fl">1</span><span class="op">)</span>
  <span class="va">ar_beta</span> <span class="op">&lt;-</span> <span class="va">ar_beta</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ar_beta</span><span class="op">)</span>

  <span class="va">mt_cts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="va">it_N</span><span class="op">)</span>, <span class="va">ar_A</span>, <span class="va">ar_alpha</span>, <span class="va">ar_beta</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">mt_cts</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'indi.id'</span>, <span class="st">'A_lin'</span>, <span class="st">'alpha_lin'</span>, <span class="st">'beta'</span><span class="op">)</span>
  <span class="va">df_esti</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="va">mt_cts</span><span class="op">)</span>
  <span class="va">fl_N_agg</span> <span class="op">&lt;-</span> <span class="fl">10</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ar_alpha</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="solve">Solve<a class="anchor" aria-label="anchor" href="#solve"></a>
</h2>
<p>I would like to be able to directly call the dataset generated here in various functions. Save the datafile we just created in the project folder.</p>
<div class="section level3">
<h3 id="prep-inputs">Prep Inputs<a class="anchor" aria-label="anchor" href="#prep-inputs"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">df_esti</span>
<span class="va">svr_A_i</span> <span class="op">&lt;-</span> <span class="st">'A_lin'</span>
<span class="va">svr_alpha_i</span> <span class="op">&lt;-</span> <span class="st">'alpha_lin'</span>
<span class="va">svr_beta_i</span> <span class="op">&lt;-</span> <span class="st">'beta'</span>
<span class="va">fl_N_agg</span> <span class="op">&lt;-</span> <span class="va">fl_N_agg</span>
<span class="va">fl_rho</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">10</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="relative-allocations">Relative Allocations<a class="anchor" aria-label="anchor" href="#relative-allocations"></a>
</h3>
<div class="section level4">
<h4 id="rank">Rank<a class="anchor" aria-label="anchor" href="#rank"></a>
</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># a. select only relevant data</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>A <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_A_i</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_alpha_i</span><span class="op">)</span>, beta <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_beta_i</span><span class="op">)</span><span class="op">)</span>

<span class="co"># b. Generate V4, Rank Index Value, rho specific</span>
<span class="co"># df_opti &lt;- df_opti %&gt;% mutate(!!paste0('rv_', it_rho_ctr) := A/((alpha*beta))^(1/(1-fl_rho)))</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank_val <span class="op">=</span> <span class="va">A</span><span class="op">/</span><span class="op">(</span><span class="op">(</span><span class="va">alpha</span><span class="op">*</span><span class="va">beta</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">fl_rho</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="co"># c. Generate Rank Index based on y-intercept</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">rank_val</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank_y_inter_idx <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="co"># d. Populate lowest index alpha, beta, and A to all rows</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lowest_rank_A <span class="op">=</span> <span class="va">A</span><span class="op">[</span><span class="va">rank_y_inter_idx</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lowest_rank_alpha <span class="op">=</span> <span class="va">alpha</span><span class="op">[</span><span class="va">rank_y_inter_idx</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>lowest_rank_beta <span class="op">=</span> <span class="va">beta</span><span class="op">[</span><span class="va">rank_y_inter_idx</span><span class="op">==</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>

<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_opti</span>, <span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 x 9</span></span>
<span class="co">##    indi.id     A alpha    beta rank_val rank_y_inter_idx lowest_rank_A</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>       4  1.12 0.895 0.037<span style="text-decoration: underline;">0</span>      1.53                1          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>      24  1.00 0.995 0.008<span style="text-decoration: underline;">53</span>     1.54                2          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>       7  1.13 0.575 0.035<span style="text-decoration: underline;">5</span>      1.61                3          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>       1  1.05 0.359 0.023<span style="text-decoration: underline;">3</span>      1.62                4          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>      26  1.22 0.738 0.038<span style="text-decoration: underline;">2</span>      1.69                5          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>      12  1.09 0.508 0.011<span style="text-decoration: underline;">7</span>      1.74                6          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>      31  1.24 0.967 0.024<span style="text-decoration: underline;">0</span>      1.75                7          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>      30  1.11 0.232 0.026<span style="text-decoration: underline;">8</span>      1.76                8          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>      14  1.27 0.615 0.036<span style="text-decoration: underline;">8</span>      1.80                9          1.12</span>
<span class="co">## <span style="color: #BCBCBC;">10</span>      40  1.18 0.308 0.017<span style="text-decoration: underline;">1</span>      1.89               10          1.12</span>
<span class="co">## <span style="color: #949494;"># ... with 2 more variables: lowest_rank_alpha &lt;dbl&gt;, lowest_rank_beta &lt;dbl&gt;</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     indi.id            A             alpha             beta          </span>
<span class="co">##  Min.   : 1.00   Min.   :1.001   Min.   :0.1222   Min.   :0.0004062  </span>
<span class="co">##  1st Qu.:13.25   1st Qu.:1.226   1st Qu.:0.3442   1st Qu.:0.0100739  </span>
<span class="co">##  Median :25.50   Median :1.445   Median :0.5527   Median :0.0195919  </span>
<span class="co">##  Mean   :25.50   Mean   :1.477   Mean   :0.5681   Mean   :0.0200000  </span>
<span class="co">##  3rd Qu.:37.75   3rd Qu.:1.743   3rd Qu.:0.8028   3rd Qu.:0.0285548  </span>
<span class="co">##  Max.   :50.00   Max.   :1.985   Max.   :0.9948   Max.   :0.0381932  </span>
<span class="co">##     rank_val     rank_y_inter_idx lowest_rank_A   lowest_rank_alpha</span>
<span class="co">##  Min.   :1.529   Min.   : 1.00    Min.   :1.122   Min.   :0.8947   </span>
<span class="co">##  1st Qu.:1.961   1st Qu.:13.25    1st Qu.:1.122   1st Qu.:0.8947   </span>
<span class="co">##  Median :2.295   Median :25.50    Median :1.122   Median :0.8947   </span>
<span class="co">##  Mean   :2.302   Mean   :25.50    Mean   :1.122   Mean   :0.8947   </span>
<span class="co">##  3rd Qu.:2.728   3rd Qu.:37.75    3rd Qu.:1.122   3rd Qu.:0.8947   </span>
<span class="co">##  Max.   :3.034   Max.   :50.00    Max.   :1.122   Max.   :0.8947   </span>
<span class="co">##  lowest_rank_beta </span>
<span class="co">##  Min.   :0.03704  </span>
<span class="co">##  1st Qu.:0.03704  </span>
<span class="co">##  Median :0.03704  </span>
<span class="co">##  Mean   :0.03704  </span>
<span class="co">##  3rd Qu.:0.03704  </span>
<span class="co">##  Max.   :0.03704</span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">lowest_rank_A</span>, <span class="va">lowest_rank_alpha</span>, <span class="va">lowest_rank_beta</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  lowest_rank_A   lowest_rank_alpha lowest_rank_beta </span>
<span class="co">##  Min.   :1.122   Min.   :0.8947    Min.   :0.03704  </span>
<span class="co">##  1st Qu.:1.122   1st Qu.:0.8947    1st Qu.:0.03704  </span>
<span class="co">##  Median :1.122   Median :0.8947    Median :0.03704  </span>
<span class="co">##  Mean   :1.122   Mean   :0.8947    Mean   :0.03704  </span>
<span class="co">##  3rd Qu.:1.122   3rd Qu.:0.8947    3rd Qu.:0.03704  </span>
<span class="co">##  Max.   :1.122   Max.   :0.8947    Max.   :0.03704</span></code></pre>
</div>
<div class="section level4">
<h4 id="relative-slopes-intercepts">Relative Slopes, Intercepts<a class="anchor" aria-label="anchor" href="#relative-slopes-intercepts"></a>
</h4>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># e. relative slope and relative intercept with respect to lowest index</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rela_slope_to_lowest <span class="op">=</span>
           <span class="op">(</span><span class="op">(</span>
             <span class="op">(</span><span class="va">lowest_rank_alpha</span><span class="op">*</span><span class="va">lowest_rank_beta</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">alpha</span><span class="op">*</span><span class="va">beta</span><span class="op">)</span>
           <span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">fl_rho</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
           <span class="op">*</span><span class="op">(</span><span class="va">lowest_rank_alpha</span><span class="op">/</span><span class="va">alpha</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rela_intercept_to_lowest <span class="op">=</span>
           <span class="op">(</span><span class="op">(</span><span class="op">(</span>
             <span class="op">(</span><span class="va">lowest_rank_alpha</span><span class="op">*</span><span class="va">lowest_rank_beta</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">alpha</span><span class="op">*</span><span class="va">beta</span><span class="op">)</span>
           <span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="op">(</span><span class="va">fl_rho</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>
           <span class="op">*</span><span class="op">(</span><span class="va">lowest_rank_A</span><span class="op">/</span><span class="va">alpha</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="op">(</span><span class="va">A</span><span class="op">/</span><span class="va">alpha</span><span class="op">)</span><span class="op">)</span>
  <span class="op">)</span>

<span class="co"># h. Relative x-intercept points and ranking based on x-intercepts</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rela_x_intercept <span class="op">=</span>
           <span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="va">rela_intercept_to_lowest</span><span class="op">/</span><span class="va">rela_slope_to_lowest</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">rela_x_intercept</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rank_x_inter_idx <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="co"># In this example, is x-intercept rank and y-intercept rank the same?</span>
<span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">df_opti</span><span class="op">$</span><span class="va">rank_y_inter_idx</span><span class="op">-</span><span class="va">df_opti</span><span class="op">$</span><span class="va">rank_x_inter_idx</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] 0</span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
          <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">rela_slope_to_lowest</span>, <span class="va">rela_intercept_to_lowest</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  rela_slope_to_lowest rela_intercept_to_lowest</span>
<span class="co">##  Min.   :0.7946       Min.   :-6.2816         </span>
<span class="co">##  1st Qu.:1.0155       1st Qu.:-1.4794         </span>
<span class="co">##  Median :1.3717       Median :-0.8238         </span>
<span class="co">##  Mean   :1.8444       Mean   :-1.1871         </span>
<span class="co">##  3rd Qu.:2.1876       3rd Qu.:-0.5305         </span>
<span class="co">##  Max.   :5.7846       Max.   : 0.0000</span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">A</span>, <span class="va">alpha</span>, <span class="va">beta</span>,
         <span class="va">rank_val</span>, <span class="va">rela_intercept_to_lowest</span>, <span class="va">rela_x_intercept</span>,
         <span class="va">rank_y_inter_idx</span>, <span class="va">rank_x_inter_idx</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 50 x 8</span></span>
<span class="co">##        A alpha    beta rank_val rela_intercept_to_lowest rela_x_intercept</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>  1.12 0.895 0.037<span style="text-decoration: underline;">0</span>      1.53                  0                 0     </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>  1.00 0.995 0.008<span style="text-decoration: underline;">53</span>     1.54                 -<span style="color: #BB0000;">0.009</span><span style="color: #BB0000; text-decoration: underline;">48</span>           0.011<span style="text-decoration: underline;">9</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>  1.13 0.575 0.035<span style="text-decoration: underline;">5</span>      1.61                 -<span style="color: #BB0000;">0.093</span><span style="color: #BB0000; text-decoration: underline;">8</span>            0.063<span style="text-decoration: underline;">0</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>  1.05 0.359 0.023<span style="text-decoration: underline;">3</span>      1.62                 -<span style="color: #BB0000;">0.156</span>             0.071<span style="text-decoration: underline;">0</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>  1.22 0.738 0.038<span style="text-decoration: underline;">2</span>      1.69                 -<span style="color: #BB0000;">0.155</span>             0.130 </span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>  1.09 0.508 0.011<span style="text-decoration: underline;">7</span>      1.74                 -<span style="color: #BB0000;">0.266</span>             0.177 </span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>  1.24 0.967 0.024<span style="text-decoration: underline;">0</span>      1.75                 -<span style="color: #BB0000;">0.163</span>             0.182 </span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>  1.11 0.232 0.026<span style="text-decoration: underline;">8</span>      1.76                 -<span style="color: #BB0000;">0.635</span>             0.192 </span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>  1.27 0.615 0.036<span style="text-decoration: underline;">8</span>      1.80                 -<span style="color: #BB0000;">0.310</span>             0.221 </span>
<span class="co">## <span style="color: #BCBCBC;">10</span>  1.18 0.308 0.017<span style="text-decoration: underline;">1</span>      1.89                 -<span style="color: #BB0000;">0.733</span>             0.299 </span>
<span class="co">## <span style="color: #949494;"># ... with 40 more rows, and 2 more variables: rank_y_inter_idx &lt;int&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   rank_x_inter_idx &lt;int&gt;</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="spline-and-inversion">Spline and Inversion<a class="anchor" aria-label="anchor" href="#spline-and-inversion"></a>
</h3>
<div class="section level4">
<h4 id="summing-up-for-splines">Summing up for Splines<a class="anchor" aria-label="anchor" href="#summing-up-for-splines"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># f. cumulative sums</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rela_slope_to_lowest_cumsum <span class="op">=</span>
                        <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">rela_slope_to_lowest</span><span class="op">)</span>
                    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rela_intercept_to_lowest_cumsum <span class="op">=</span>
                        <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="va">rela_intercept_to_lowest</span><span class="op">)</span>
                    <span class="op">)</span>
<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">rela_slope_to_lowest_cumsum</span>, <span class="va">rela_intercept_to_lowest_cumsum</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  rela_slope_to_lowest_cumsum rela_intercept_to_lowest_cumsum</span>
<span class="co">##  Min.   : 1.00               Min.   :-59.356                </span>
<span class="co">##  1st Qu.:30.81               1st Qu.:-28.787                </span>
<span class="co">##  Median :48.36               Median :-15.944                </span>
<span class="co">##  Mean   :46.42               Mean   :-19.426                </span>
<span class="co">##  3rd Qu.:64.62               3rd Qu.: -7.318                </span>
<span class="co">##  Max.   :92.22               Max.   :  0.000</span></code></pre>
</div>
<div class="section level4">
<h4 id="inverting-splines-cumulative">Inverting Splines (Cumulative)<a class="anchor" aria-label="anchor" href="#inverting-splines-cumulative"></a>
</h4>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># g. inverting cumulative slopes and intercepts</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rela_slope_to_lowest_cumsum_invert <span class="op">=</span>
                        <span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="va">rela_slope_to_lowest_cumsum</span><span class="op">)</span>
                    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>rela_intercept_to_lowest_cumsum_invert <span class="op">=</span>
                        <span class="op">(</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="va">rela_intercept_to_lowest_cumsum</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="va">rela_slope_to_lowest_cumsum</span><span class="op">)</span><span class="op">)</span>
                    <span class="op">)</span>
<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">rela_slope_to_lowest_cumsum_invert</span>, <span class="va">rela_intercept_to_lowest_cumsum_invert</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  rela_slope_to_lowest_cumsum_invert rela_intercept_to_lowest_cumsum_invert</span>
<span class="co">##  Min.   :0.01084                    Min.   :0.0000                        </span>
<span class="co">##  1st Qu.:0.01548                    1st Qu.:0.2375                        </span>
<span class="co">##  Median :0.02068                    Median :0.3296                        </span>
<span class="co">##  Mean   :0.06883                    Mean   :0.3284                        </span>
<span class="co">##  3rd Qu.:0.03247                    3rd Qu.:0.4453                        </span>
<span class="co">##  Max.   :1.00000                    Max.   :0.6436</span></code></pre>
</div>
<div class="section level4">
<h4 id="x-intercepts-as-spline-knots-and-inverted-spline-knots">X intercepts as Spline Knots and inverted Spline Knots<a class="anchor" aria-label="anchor" href="#x-intercepts-as-spline-knots-and-inverted-spline-knots"></a>
</h4>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># # h. Relative x-intercept points</span>
<span class="co"># df_opti &lt;- df_opti %&gt;%</span>
<span class="co">#               mutate(rela_x_intercept =</span>
<span class="co">#                         (-1)*(rela_intercept_to_lowest/rela_slope_to_lowest)</span>
<span class="co">#                     )</span>

<span class="co"># i. Inverted relative x-intercepts</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>opti_lowest_spline_knots <span class="op">=</span>
                        <span class="op">(</span><span class="va">rela_intercept_to_lowest_cumsum</span> <span class="op">+</span> <span class="va">rela_slope_to_lowest_cumsum</span><span class="op">*</span><span class="va">rela_x_intercept</span><span class="op">)</span>
                    <span class="op">)</span>
<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">rela_x_intercept</span>, <span class="va">opti_lowest_spline_knots</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  rela_x_intercept opti_lowest_spline_knots</span>
<span class="co">##  Min.   :0.0000   Min.   : 0.000          </span>
<span class="co">##  1st Qu.:0.3538   1st Qu.: 3.586          </span>
<span class="co">##  Median :0.6277   Median :14.415          </span>
<span class="co">##  Mean   :0.6334   Mean   :18.657          </span>
<span class="co">##  3rd Qu.:0.9831   3rd Qu.:34.778          </span>
<span class="co">##  Max.   :1.2340   Max.   :54.438</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="optimal-allocations">Optimal Allocations<a class="anchor" aria-label="anchor" href="#optimal-allocations"></a>
</h3>
<div class="section level4">
<h4 id="compute-optimal-allocation-for-the-lowest">Compute Optimal Allocation for the Lowest<a class="anchor" aria-label="anchor" href="#compute-optimal-allocation-for-the-lowest"></a>
</h4>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># j. Sort by order of receiving transfers/subsidies</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">rela_x_intercept</span><span class="op">)</span>

<span class="co"># k. Find position of subsidy</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">opti_lowest_spline_knots</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>tot_devi <span class="op">=</span> <span class="va">opti_lowest_spline_knots</span> <span class="op">-</span> <span class="va">fl_N_agg</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">*</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">tot_devi</span> <span class="op">&lt;</span> <span class="fl">0</span> <span class="op">~</span> <span class="va">tot_devi</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>allocate_lowest <span class="op">=</span>
                        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span>
                                    <span class="va">rela_intercept_to_lowest_cumsum_invert</span> <span class="op">+</span>
                                    <span class="va">rela_slope_to_lowest_cumsum_invert</span><span class="op">*</span><span class="va">fl_N_agg</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>allocate_lowest <span class="op">=</span> <span class="va">allocate_lowest</span><span class="op">[</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">]</span><span class="op">)</span>
<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">tot_devi</span>, <span class="va">allocate_lowest</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     tot_devi      allocate_lowest </span>
<span class="co">##  Min.   :-5.681   Min.   :0.4198  </span>
<span class="co">##  1st Qu.:-2.095   1st Qu.:0.4198  </span>
<span class="co">##  Median : 8.735   Median :0.4198  </span>
<span class="co">##  Mean   :12.976   Mean   :0.4198  </span>
<span class="co">##  3rd Qu.:29.097   3rd Qu.:0.4198  </span>
<span class="co">##  Max.   :48.758   Max.   :0.4198</span></code></pre>
</div>
<div class="section level4">
<h4 id="compute-optimal-allocation-for-all-others-given-lowest">Compute Optimal Allocation for All Others given Lowest<a class="anchor" aria-label="anchor" href="#compute-optimal-allocation-for-all-others-given-lowest"></a>
</h4>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># l. Find position of subsidy</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>opti_allocate <span class="op">=</span>
                        <span class="va">rela_intercept_to_lowest</span> <span class="op">+</span>
                        <span class="va">rela_slope_to_lowest</span><span class="op">*</span><span class="va">allocate_lowest</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>opti_allocate <span class="op">=</span>
                        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">opti_allocate</span> <span class="op">&gt;=</span> <span class="fl">0</span> <span class="op">~</span> <span class="va">opti_allocate</span>, <span class="cn">TRUE</span> <span class="op">~</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>allocate_total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">opti_allocate</span>, na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>

<span class="co"># if want 0 to be 0</span>
<span class="co"># case_when(opti_allocate &gt;= 0 ~ opti_allocate, TRUE ~ 0)) %&gt;%</span>
<span class="co"># if want 0 to be NA, makes it easier to see average change for non zeros</span>
<span class="co"># case_when(opti_allocate &gt;= 0 ~ opti_allocate)) %&gt;%</span>

<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">opti_allocate</span>, <span class="va">allocate_total</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  opti_allocate    allocate_total </span>
<span class="co">##  Min.   :0.0000   Min.   :5.681  </span>
<span class="co">##  1st Qu.:0.0000   1st Qu.:5.681  </span>
<span class="co">##  Median :0.0000   Median :5.681  </span>
<span class="co">##  Mean   :0.1136   Mean   :5.681  </span>
<span class="co">##  3rd Qu.:0.1792   3rd Qu.:5.681  </span>
<span class="co">##  Max.   :0.7674   Max.   :5.681</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="expected-outcomes-given-optimal-allocations">Expected Outcomes Given Optimal Allocations<a class="anchor" aria-label="anchor" href="#expected-outcomes-given-optimal-allocations"></a>
</h3>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># l. Predictes Expected choice: A + alpha*opti_allocate</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>opti_exp_outcome <span class="op">=</span> <span class="va">A</span> <span class="op">+</span> <span class="va">alpha</span><span class="op">*</span><span class="va">opti_allocate</span><span class="op">)</span>

<span class="co"># m. Drop some variables that I do not want to keep even in full df to export</span>
<span class="co"># inpalc = input allocation optimal</span>
<span class="co"># expout = expected outcome given input allocation</span>
<span class="va">df_opti</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'lowest_rank_alpha'</span>, <span class="st">'lowest_rank_beta'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">ar_opti_inpalc</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">opti_allocate</span><span class="op">)</span>
<span class="va">ar_opti_expout</span> <span class="op">&lt;-</span> <span class="va">df_opti</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">opti_exp_outcome</span><span class="op">)</span>

<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df_opti</span>, <span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 x 21</span></span>
<span class="co">##    indi.id     A alpha    beta rank_val rank_y_inter_idx lowest_rank_A</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>      33  1.42 0.722 0.026<span style="text-decoration: underline;">1</span>      2.03               15          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>      48  1.09 0.519 0.002<span style="text-decoration: underline;">98</span>     1.97               14          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>       6  1.21 0.141 0.034<span style="text-decoration: underline;">6</span>      1.96               13          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>      41  1.13 0.229 0.012<span style="text-decoration: underline;">1</span>      1.93               12          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>      35  1.10 0.122 0.020<span style="text-decoration: underline;">2</span>      1.90               11          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>      40  1.18 0.308 0.017<span style="text-decoration: underline;">1</span>      1.89               10          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>      14  1.27 0.615 0.036<span style="text-decoration: underline;">8</span>      1.80                9          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>      30  1.11 0.232 0.026<span style="text-decoration: underline;">8</span>      1.76                8          1.12</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>      31  1.24 0.967 0.024<span style="text-decoration: underline;">0</span>      1.75                7          1.12</span>
<span class="co">## <span style="color: #BCBCBC;">10</span>      12  1.09 0.508 0.011<span style="text-decoration: underline;">7</span>      1.74                6          1.12</span>
<span class="co">## <span style="color: #949494;"># ... with 14 more variables: rela_slope_to_lowest &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   rela_intercept_to_lowest &lt;dbl&gt;, rela_x_intercept &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   rank_x_inter_idx &lt;int&gt;, rela_slope_to_lowest_cumsum &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   rela_intercept_to_lowest_cumsum &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   rela_slope_to_lowest_cumsum_invert &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   rela_intercept_to_lowest_cumsum_invert &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   opti_lowest_spline_knots &lt;dbl&gt;, tot_devi &lt;dbl&gt;, allocate_lowest &lt;dbl&gt;, ...</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">df_opti</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##     indi.id            A             alpha             beta          </span>
<span class="co">##  Min.   : 1.00   Min.   :1.001   Min.   :0.1222   Min.   :0.0004062  </span>
<span class="co">##  1st Qu.:13.25   1st Qu.:1.226   1st Qu.:0.3442   1st Qu.:0.0100739  </span>
<span class="co">##  Median :25.50   Median :1.445   Median :0.5527   Median :0.0195919  </span>
<span class="co">##  Mean   :25.50   Mean   :1.477   Mean   :0.5681   Mean   :0.0200000  </span>
<span class="co">##  3rd Qu.:37.75   3rd Qu.:1.743   3rd Qu.:0.8028   3rd Qu.:0.0285548  </span>
<span class="co">##  Max.   :50.00   Max.   :1.985   Max.   :0.9948   Max.   :0.0381932  </span>
<span class="co">##     rank_val     rank_y_inter_idx lowest_rank_A   rela_slope_to_lowest</span>
<span class="co">##  Min.   :1.529   Min.   : 1.00    Min.   :1.122   Min.   :0.7946      </span>
<span class="co">##  1st Qu.:1.961   1st Qu.:13.25    1st Qu.:1.122   1st Qu.:1.0155      </span>
<span class="co">##  Median :2.295   Median :25.50    Median :1.122   Median :1.3717      </span>
<span class="co">##  Mean   :2.302   Mean   :25.50    Mean   :1.122   Mean   :1.8444      </span>
<span class="co">##  3rd Qu.:2.728   3rd Qu.:37.75    3rd Qu.:1.122   3rd Qu.:2.1876      </span>
<span class="co">##  Max.   :3.034   Max.   :50.00    Max.   :1.122   Max.   :5.7846      </span>
<span class="co">##  rela_intercept_to_lowest rela_x_intercept rank_x_inter_idx</span>
<span class="co">##  Min.   :-6.2816          Min.   :0.0000   Min.   : 1.00   </span>
<span class="co">##  1st Qu.:-1.4794          1st Qu.:0.3538   1st Qu.:13.25   </span>
<span class="co">##  Median :-0.8238          Median :0.6277   Median :25.50   </span>
<span class="co">##  Mean   :-1.1871          Mean   :0.6334   Mean   :25.50   </span>
<span class="co">##  3rd Qu.:-0.5305          3rd Qu.:0.9831   3rd Qu.:37.75   </span>
<span class="co">##  Max.   : 0.0000          Max.   :1.2340   Max.   :50.00   </span>
<span class="co">##  rela_slope_to_lowest_cumsum rela_intercept_to_lowest_cumsum</span>
<span class="co">##  Min.   : 1.00               Min.   :-59.356                </span>
<span class="co">##  1st Qu.:30.81               1st Qu.:-28.787                </span>
<span class="co">##  Median :48.36               Median :-15.944                </span>
<span class="co">##  Mean   :46.42               Mean   :-19.426                </span>
<span class="co">##  3rd Qu.:64.62               3rd Qu.: -7.318                </span>
<span class="co">##  Max.   :92.22               Max.   :  0.000                </span>
<span class="co">##  rela_slope_to_lowest_cumsum_invert rela_intercept_to_lowest_cumsum_invert</span>
<span class="co">##  Min.   :0.01084                    Min.   :0.0000                        </span>
<span class="co">##  1st Qu.:0.01548                    1st Qu.:0.2375                        </span>
<span class="co">##  Median :0.02068                    Median :0.3296                        </span>
<span class="co">##  Mean   :0.06883                    Mean   :0.3284                        </span>
<span class="co">##  3rd Qu.:0.03247                    3rd Qu.:0.4453                        </span>
<span class="co">##  Max.   :1.00000                    Max.   :0.6436                        </span>
<span class="co">##  opti_lowest_spline_knots    tot_devi      allocate_lowest  opti_allocate   </span>
<span class="co">##  Min.   : 0.000           Min.   :-5.681   Min.   :0.4198   Min.   :0.0000  </span>
<span class="co">##  1st Qu.: 3.586           1st Qu.:-2.095   1st Qu.:0.4198   1st Qu.:0.0000  </span>
<span class="co">##  Median :14.415           Median : 8.735   Median :0.4198   Median :0.0000  </span>
<span class="co">##  Mean   :18.657           Mean   :12.976   Mean   :0.4198   Mean   :0.1136  </span>
<span class="co">##  3rd Qu.:34.778           3rd Qu.:29.097   3rd Qu.:0.4198   3rd Qu.:0.1792  </span>
<span class="co">##  Max.   :54.438           Max.   :48.758   Max.   :0.4198   Max.   :0.7674  </span>
<span class="co">##  allocate_total  opti_exp_outcome</span>
<span class="co">##  Min.   :5.681   Min.   :1.133   </span>
<span class="co">##  1st Qu.:5.681   1st Qu.:1.357   </span>
<span class="co">##  Median :5.681   Median :1.471   </span>
<span class="co">##  Mean   :5.681   Mean   :1.529   </span>
<span class="co">##  3rd Qu.:5.681   3rd Qu.:1.743   </span>
<span class="co">##  Max.   :5.681   Max.   :1.985</span></code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">ar_opti_expout</span>,<span class="va">ar_opti_inpalc</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##       ar_opti_expout ar_opti_inpalc</span>
<span class="co">##  [1,]       1.422612    0.006880531</span>
<span class="co">##  [2,]       1.133311    0.076469304</span>
<span class="co">##  [3,]       1.257978    0.364864308</span>
<span class="co">##  [4,]       1.194809    0.280558877</span>
<span class="co">##  [5,]       1.182663    0.653270709</span>
<span class="co">##  [6,]       1.266780    0.297369431</span>
<span class="co">##  [7,]       1.446481    0.279664218</span>
<span class="co">##  [8,]       1.286286    0.753652841</span>
<span class="co">##  [9,]       1.449922    0.213404330</span>
<span class="co">## [10,]       1.280823    0.366106406</span>
<span class="co">## [11,]       1.475576    0.346299292</span>
<span class="co">## [12,]       1.321196    0.767417565</span>
<span class="co">## [13,]       1.432987    0.530954043</span>
<span class="co">## [14,]       1.323050    0.324096274</span>
<span class="co">## [15,]       1.497510    0.419810625</span>
<span class="co">## [16,]       1.320373    0.000000000</span>
<span class="co">## [17,]       1.187691    0.000000000</span>
<span class="co">## [18,]       1.439832    0.000000000</span>
<span class="co">## [19,]       1.511505    0.000000000</span>
<span class="co">## [20,]       1.434893    0.000000000</span>
<span class="co">## [21,]       1.442200    0.000000000</span>
<span class="co">## [22,]       1.475317    0.000000000</span>
<span class="co">## [23,]       1.560948    0.000000000</span>
<span class="co">## [24,]       1.665115    0.000000000</span>
<span class="co">## [25,]       1.668056    0.000000000</span>
<span class="co">## [26,]       1.379817    0.000000000</span>
<span class="co">## [27,]       1.374463    0.000000000</span>
<span class="co">## [28,]       1.448516    0.000000000</span>
<span class="co">## [29,]       1.351798    0.000000000</span>
<span class="co">## [30,]       1.466779    0.000000000</span>
<span class="co">## [31,]       1.383970    0.000000000</span>
<span class="co">## [32,]       1.754475    0.000000000</span>
<span class="co">## [33,]       1.753308    0.000000000</span>
<span class="co">## [34,]       1.629221    0.000000000</span>
<span class="co">## [35,]       1.788196    0.000000000</span>
<span class="co">## [36,]       1.653102    0.000000000</span>
<span class="co">## [37,]       1.710182    0.000000000</span>
<span class="co">## [38,]       1.794342    0.000000000</span>
<span class="co">## [39,]       1.798925    0.000000000</span>
<span class="co">## [40,]       1.886469    0.000000000</span>
<span class="co">## [41,]       1.984957    0.000000000</span>
<span class="co">## [42,]       1.656758    0.000000000</span>
<span class="co">## [43,]       1.612771    0.000000000</span>
<span class="co">## [44,]       1.810064    0.000000000</span>
<span class="co">## [45,]       1.895045    0.000000000</span>
<span class="co">## [46,]       1.893051    0.000000000</span>
<span class="co">## [47,]       1.814640    0.000000000</span>
<span class="co">## [48,]       1.343516    0.000000000</span>
<span class="co">## [49,]       1.812390    0.000000000</span>
<span class="co">## [50,]       1.782294    0.000000000</span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="save-outputs">Save Outputs<a class="anchor" aria-label="anchor" href="#save-outputs"></a>
</h2>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="va">bl_save_rda</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># df_opt_dtgch_ropti: dataframe, opt project, data guat cebu height, cebu edu mother, results relative linear optimal</span>
  <span class="va">df_opt_dtgch_cbem4_rrlop</span> <span class="op">&lt;-</span> <span class="va">df_opti</span>
  <span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_data.html" class="external-link">use_data</a></span><span class="op">(</span><span class="va">df_opt_dtgch_cbem4_rrlop</span>, <span class="va">df_opt_dtgch_cbem4_rrlop</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  
<span class="op">}</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://fanwangecon.github.io" class="external-link">Fan Wang</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
