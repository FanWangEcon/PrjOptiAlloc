<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bush Checks from the Economic Stimulus Act of 2008 â€¢ Optimal Allocation</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Bush Checks from the Economic Stimulus Act of 2008">
<meta property="og:description" content="In 2008, the Bush administration sent out stimulus checks as tax rebates. The checks are a function of income, marital status, and the number of children. We have functions that computable taxable income given income, tax liability given income, and also stimulus amount given income.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-92953468-10"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-92953468-10');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Optimal Allocation</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Tutorials</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Papers
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3839890" class="external-link">Optimal Allocations to Heterogeneous Agents with An Application to Stimulus Checks</a>
    </li>
    <li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3691091" class="external-link">Optimal Allocation of the COVID-19 Stimulus Checks</a>
    </li>
    <li>
      <a href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3547706" class="external-link">The Optimal Allocation of Resources among Heterogeneous Individuals</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Sites
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://fanwangecon.github.io/REconTools/" class="external-link">R Tools for Data and Optimization</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/R4Econ/" class="external-link">R Examples Data and Optimization</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stat4Econ/" class="external-link">R Examples Introductory Statistics</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Stata4Econ/" class="external-link">Stata Examples Regressions and Tables</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/M4Econ/" class="external-link">Matlab Examples Matrix and Graphs</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Math4Econ/" class="external-link">Matlab Introductory Math for Econ</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/Tex4Econ/" class="external-link">Latex and Paper Generation Examples</a>
    </li>
    <li>
      <a href="https://fanwangecon.github.io/pyfan/" class="external-link">Python Examples</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/fanwangecon/PrjOptiAlloc" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/fanwangecon" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Bush Checks from the Economic Stimulus Act of 2008</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/FanWangEcon/PrjOptiAlloc/blob/HEAD/vignettes/ffv_snw_stimulus_bush_2008.Rmd" class="external-link"><code>vignettes/ffv_snw_stimulus_bush_2008.Rmd</code></a></small>
      <div class="hidden name"><code>ffv_snw_stimulus_bush_2008.Rmd</code></div>

    </div>

    
    
<p>In 2008, the Bush administration sent out stimulus checks as tax rebates (<a href="https://en.wikipedia.org/wiki/Economic_Stimulus_Act_of_2008" class="external-link">Economic Stimulus Act of 2008</a>). The checks are a function of income, marital status, and the number of children. We have functions that computable taxable income given income, tax liability given income, and also stimulus amount given income.</p>
<div class="section level2">
<h2 id="taxable-income-and-tax-liability-in-2008">Taxable Income and Tax Liability in 2008<a class="anchor" aria-label="anchor" href="#taxable-income-and-tax-liability-in-2008"></a>
</h2>
<p>First, we test the taxable income function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ar_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">2e4</span>, <span class="fl">4e4</span>, <span class="fl">8e4</span>, <span class="fl">1.6e5</span><span class="op">)</span>
<span class="va">ls_taxable</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ffp_snw_tax_liability.html">ffp_snw_tax_liability</a></span><span class="op">(</span><span class="va">ar_income</span><span class="op">)</span>
<span class="va">mn_taxable_income</span> <span class="op">&lt;-</span> <span class="va">ls_taxable</span><span class="op">$</span><span class="va">mn_taxable_income</span>
<span class="va">mn_tax_liability</span> <span class="op">&lt;-</span> <span class="va">ls_taxable</span><span class="op">$</span><span class="va">mn_tax_liability</span></code></pre></div>
<p>Second, show the taxable income schedule.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">'mn_taxable_income'</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] "mn_taxable_income"</span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mn_taxable_income</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## , , kids=0</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000       1050     -7900</span>
<span class="co">## income=20000      11050      2100</span>
<span class="co">## income=40000      31050     22100</span>
<span class="co">## income=80000      71050     62100</span>
<span class="co">## income=160000    151050    142100</span>
<span class="co">## </span>
<span class="co">## , , kids=1</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000      -5000    -11400</span>
<span class="co">## income=20000       5000     -1400</span>
<span class="co">## income=40000      25000     18600</span>
<span class="co">## income=80000      65000     58600</span>
<span class="co">## income=160000    145000    138600</span>
<span class="co">## </span>
<span class="co">## , , kids=2</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000      -8500    -14900</span>
<span class="co">## income=20000       1500     -4900</span>
<span class="co">## income=40000      21500     15100</span>
<span class="co">## income=80000      61500     55100</span>
<span class="co">## income=160000    141500    135100</span>
<span class="co">## </span>
<span class="co">## , , kids=3</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000     -12000    -18400</span>
<span class="co">## income=20000      -2000     -8400</span>
<span class="co">## income=40000      18000     11600</span>
<span class="co">## income=80000      58000     51600</span>
<span class="co">## income=160000    138000    131600</span>
<span class="co">## </span>
<span class="co">## , , kids=4</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000     -15500    -21900</span>
<span class="co">## income=20000      -5500    -11900</span>
<span class="co">## income=40000      14500      8100</span>
<span class="co">## income=80000      54500     48100</span>
<span class="co">## income=160000    134500    128100</span></code></pre>
<p>Third, show the tax liability schedule.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">'mn_tax_liability'</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] "mn_tax_liability"</span></code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mn_tax_liability</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## , , kids=0</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000     105.00       0.0</span>
<span class="co">## income=20000    1256.25     210.0</span>
<span class="co">## income=40000    4256.25    2512.5</span>
<span class="co">## income=80000   14106.25    8512.5</span>
<span class="co">## income=160000  36272.25   28532.0</span>
<span class="co">## </span>
<span class="co">## , , kids=1</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000        0.0       0.0</span>
<span class="co">## income=20000      500.0       0.0</span>
<span class="co">## income=40000     3177.5    1987.5</span>
<span class="co">## income=80000    11312.5    7987.5</span>
<span class="co">## income=160000   32283.0   27552.0</span>
<span class="co">## </span>
<span class="co">## , , kids=2</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000        0.0       0.0</span>
<span class="co">## income=20000      150.0       0.0</span>
<span class="co">## income=40000     2652.5    1510.0</span>
<span class="co">## income=80000    10437.5    7462.5</span>
<span class="co">## income=160000   31303.0   26572.0</span>
<span class="co">## </span>
<span class="co">## , , kids=3</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000        0.0       0.0</span>
<span class="co">## income=20000        0.0       0.0</span>
<span class="co">## income=40000     2127.5    1160.0</span>
<span class="co">## income=80000     9562.5    6937.5</span>
<span class="co">## income=160000   30323.0   25592.0</span>
<span class="co">## </span>
<span class="co">## , , kids=4</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000        0.0       0.0</span>
<span class="co">## income=20000        0.0       0.0</span>
<span class="co">## income=40000     1602.5     810.0</span>
<span class="co">## income=80000     8687.5    6412.5</span>
<span class="co">## income=160000   29343.0   24712.5</span></code></pre>
</div>
<div class="section level2">
<h2 id="stimulus-checks-tax-rebate-under-bush-economic-stimulus-act-of-2008">Stimulus Checks (Tax Rebate) Under Bush Economic Stimulus Act of 2008<a class="anchor" aria-label="anchor" href="#stimulus-checks-tax-rebate-under-bush-economic-stimulus-act-of-2008"></a>
</h2>
<p>Find taxable income, tax liability, and then finally stimulus checks (tax-rebates) amounts for households with 10k, 20k, 30k, 40k, 50k, 60k, 70k, 80k, 90k, 100k, and 160k income, and all kids and marital status combinations.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Income array</span>
<span class="va">ar_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1e4</span>, <span class="fl">2e4</span>, <span class="fl">3e4</span>, <span class="fl">4e4</span>, <span class="fl">5e4</span>, <span class="fl">6e4</span>, <span class="fl">7e4</span>, <span class="fl">8e4</span>, <span class="fl">9e4</span>, <span class="fl">1.6e5</span><span class="op">)</span>

<span class="co"># Store stimulus checks amounts</span>
<span class="va">mn_stimulus_check</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/array.html" class="external-link">array</a></span><span class="op">(</span><span class="cn">NA</span>, dim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ar_income</span><span class="op">)</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Solve and Store stimulus by kids count and marital status</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">it_kids</span> <span class="kw">in</span> <span class="fl">0</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">{</span>
  <span class="kw">for</span> <span class="op">(</span><span class="va">bl_marital</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># Solve and Store</span>
    <span class="va">ar_stimulus_check</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ffp_snw_stimulus_checks_bush.html">ffp_snw_stimulus_checks_bush</a></span><span class="op">(</span><span class="va">ar_income</span>, <span class="va">it_kids</span>, <span class="va">bl_marital</span><span class="op">)</span>
    <span class="va">mn_stimulus_check</span><span class="op">[</span>, <span class="va">bl_marital</span><span class="op">+</span><span class="fl">1</span>, <span class="va">it_kids</span><span class="op">+</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">ar_stimulus_check</span>
  <span class="op">}</span>
<span class="op">}</span>

<span class="co"># Labeling</span>
<span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">mn_stimulus_check</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'income='</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">ar_income</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">mn_stimulus_check</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'married='</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/dimnames.html" class="external-link">dimnames</a></span><span class="op">(</span><span class="va">mn_stimulus_check</span><span class="op">)</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">'kids='</span>, <span class="fl">0</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span>

<span class="co"># Print</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">'mn_stimulus_check'</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] "mn_stimulus_check"</span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">mn_stimulus_check</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## , , kids=0</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000        300       600</span>
<span class="co">## income=20000        600       600</span>
<span class="co">## income=30000        600      1200</span>
<span class="co">## income=40000        600      1200</span>
<span class="co">## income=50000        600      1200</span>
<span class="co">## income=60000        600      1200</span>
<span class="co">## income=70000        600      1200</span>
<span class="co">## income=80000        350      1200</span>
<span class="co">## income=90000          0      1200</span>
<span class="co">## income=160000         0       700</span>
<span class="co">## </span>
<span class="co">## , , kids=1</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000        600       900</span>
<span class="co">## income=20000        800       900</span>
<span class="co">## income=30000        900      1160</span>
<span class="co">## income=40000        900      1500</span>
<span class="co">## income=50000        900      1500</span>
<span class="co">## income=60000        900      1500</span>
<span class="co">## income=70000        900      1500</span>
<span class="co">## income=80000        650      1500</span>
<span class="co">## income=90000        150      1500</span>
<span class="co">## income=160000         0      1000</span>
<span class="co">## </span>
<span class="co">## , , kids=2</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000        900      1200</span>
<span class="co">## income=20000        900      1200</span>
<span class="co">## income=30000       1200      1200</span>
<span class="co">## income=40000       1200      1800</span>
<span class="co">## income=50000       1200      1800</span>
<span class="co">## income=60000       1200      1800</span>
<span class="co">## income=70000       1200      1800</span>
<span class="co">## income=80000        950      1800</span>
<span class="co">## income=90000        450      1800</span>
<span class="co">## income=160000         0      1300</span>
<span class="co">## </span>
<span class="co">## , , kids=3</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000       1200      1500</span>
<span class="co">## income=20000       1200      1500</span>
<span class="co">## income=30000       1500      1500</span>
<span class="co">## income=40000       1500      2060</span>
<span class="co">## income=50000       1500      2100</span>
<span class="co">## income=60000       1500      2100</span>
<span class="co">## income=70000       1500      2100</span>
<span class="co">## income=80000       1250      2100</span>
<span class="co">## income=90000        750      2100</span>
<span class="co">## income=160000         0      1600</span>
<span class="co">## </span>
<span class="co">## , , kids=4</span>
<span class="co">## </span>
<span class="co">##               married=0 married=1</span>
<span class="co">## income=10000       1500      1800</span>
<span class="co">## income=20000       1500      1800</span>
<span class="co">## income=30000       1650      1800</span>
<span class="co">## income=40000       1800      2010</span>
<span class="co">## income=50000       1800      2400</span>
<span class="co">## income=60000       1800      2400</span>
<span class="co">## income=70000       1800      2400</span>
<span class="co">## income=80000       1550      2400</span>
<span class="co">## income=90000       1050      2400</span>
<span class="co">## income=160000         0      1900</span></code></pre>
</div>
<div class="section level2">
<h2 id="compute-average-stimulus-by-income-bin-for-multiple-households-in-dataframe">Compute Average Stimulus by Income Bin for Multiple Households in Dataframe<a class="anchor" aria-label="anchor" href="#compute-average-stimulus-by-income-bin-for-multiple-households-in-dataframe"></a>
</h2>
<p>We have a dataframe of households, where each household is defined by the number of kids in the household, marital status, and also income bin. Note that this is an income bin, not a specific income level. We computes an approximate income-bin (and marital status and kids count) specific stimulus amount by evaluating the stimulus checks function along a fine grid of income levels from the min to the max point of the income-bin, and simply take the average.</p>
<p>We do this first for the actual stimulus that households should receive under the Economic Stimulus Act of 2008. We then adjust parameters for the stimulus function and compute alternative max-stimulus bounds for each income bin.</p>
<div class="section level3">
<h3 id="test-the-stimulus-determiniation-function-line-by-ine">Test the Stimulus Determiniation Function Line by ine<a class="anchor" aria-label="anchor" href="#test-the-stimulus-determiniation-function-line-by-ine"></a>
</h3>
<p>We develop the function by testing out the code line by line first.</p>
<p>First, load in the testing dataframe <em>df_nsw_tiny_chk168_df_id</em>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load file</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">df_nsw_tiny_chk168_df_id</span><span class="op">)</span>
<span class="va">df_id</span> <span class="op">&lt;-</span> <span class="va">df_nsw_tiny_chk168_df_id</span>
<span class="co"># Print results</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_id</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 111 x 7</span></span>
<span class="co">##     id_i marital  kids age_group ymin_group        mass hhsize</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     1       0     0 (17,64]   (0,0.363]     0.031<span style="text-decoration: underline;">7</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     2       0     0 (17,64]   (0.363,0.544] 0.060<span style="text-decoration: underline;">6</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     3       0     0 (17,64]   (0.544,0.725] 0.099<span style="text-decoration: underline;">4</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     4       0     0 (17,64]   (0.725,0.907] 0.043<span style="text-decoration: underline;">7</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     5       0     0 (17,64]   (0.907,1.09]  0.050<span style="text-decoration: underline;">8</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     6       0     0 (17,64]   (1.09,1.27]   0.021<span style="text-decoration: underline;">8</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     7       0     0 (17,64]   (1.27,1.45]   0.019<span style="text-decoration: underline;">1</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     8       0     0 (17,64]   (1.45,1.63]   0.030<span style="text-decoration: underline;">7</span>        1</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     9       0     0 (17,64]   (1.63,1.81]   0.000<span style="text-decoration: underline;">942</span>      1</span>
<span class="co">## <span style="color: #BCBCBC;">10</span>    10       0     0 (17,64]   (1.81,1.99]   0.011<span style="text-decoration: underline;">9</span>        1</span>
<span class="co">## <span style="color: #949494;"># ... with 101 more rows</span></span></code></pre>
<p>Second, parse the <em>ymin_group</em> group.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># what 1 in model equals to</span>
<span class="va">fl_multiple</span> <span class="op">&lt;-</span> <span class="fl">58056</span>

<span class="co"># Define input variables</span>
<span class="va">svr_ymin_group</span> <span class="op">&lt;-</span> <span class="st">'ymin_group'</span>

<span class="co"># Parse the ymin group</span>
<span class="va">df_id</span> <span class="op">&lt;-</span> <span class="va">df_id</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rowwise.html" class="external-link">rowwise</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_ymin_group</span><span class="op">)</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_ymin_group</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>y_group_min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_ymin_group</span><span class="op">)</span>, <span class="st">","</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="fl">2</span><span class="op">)</span>,
           y_group_max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/strsplit.html" class="external-link">strsplit</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_ymin_group</span><span class="op">)</span>, <span class="st">","</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,  pattern <span class="op">=</span> <span class="st">"]"</span>, replacement <span class="op">=</span> <span class="st">""</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>y_group_min <span class="op">=</span> <span class="va">fl_multiple</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">y_group_min</span><span class="op">)</span>, 
           y_group_max <span class="op">=</span> <span class="va">fl_multiple</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">y_group_max</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span>
<span class="co"># Print results</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_id</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 x 9</span></span>
<span class="co">##     id_i marital  kids age_group ymin_group        mass hhsize y_group_min</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     1       0     0 (17,64]   (0,0.363]     0.031<span style="text-decoration: underline;">7</span>        1          0 </span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     2       0     0 (17,64]   (0.363,0.544] 0.060<span style="text-decoration: underline;">6</span>        1      <span style="text-decoration: underline;">21</span>074.</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     3       0     0 (17,64]   (0.544,0.725] 0.099<span style="text-decoration: underline;">4</span>        1      <span style="text-decoration: underline;">31</span>582.</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     4       0     0 (17,64]   (0.725,0.907] 0.043<span style="text-decoration: underline;">7</span>        1      <span style="text-decoration: underline;">42</span>091.</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     5       0     0 (17,64]   (0.907,1.09]  0.050<span style="text-decoration: underline;">8</span>        1      <span style="text-decoration: underline;">52</span>657.</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     6       0     0 (17,64]   (1.09,1.27]   0.021<span style="text-decoration: underline;">8</span>        1      <span style="text-decoration: underline;">63</span>281.</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     7       0     0 (17,64]   (1.27,1.45]   0.019<span style="text-decoration: underline;">1</span>        1      <span style="text-decoration: underline;">73</span>731.</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     8       0     0 (17,64]   (1.45,1.63]   0.030<span style="text-decoration: underline;">7</span>        1      <span style="text-decoration: underline;">84</span>181.</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     9       0     0 (17,64]   (1.63,1.81]   0.000<span style="text-decoration: underline;">942</span>      1      <span style="text-decoration: underline;">94</span>631.</span>
<span class="co">## <span style="color: #BCBCBC;">10</span>    10       0     0 (17,64]   (1.81,1.99]   0.011<span style="text-decoration: underline;">9</span>        1     <span style="text-decoration: underline;">105</span>081.</span>
<span class="co">## <span style="color: #949494;"># ... with 1 more variable: y_group_max &lt;dbl&gt;</span></span></code></pre>
<p>Third, generate an income array with <em>y_group_min</em> and <em>y_group_max</em>, and call the stimulus function to solve for stimulus along the income array, and then take average. Set various parameters</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Dollar per Check</span>
<span class="va">fl_percheck_dollar</span> <span class="op">&lt;-</span> <span class="fl">100</span>

<span class="co"># Define input variables</span>
<span class="va">svr_id</span> <span class="op">&lt;-</span> <span class="st">'id_i'</span>
<span class="va">svr_marital</span> <span class="op">&lt;-</span> <span class="st">'marital'</span>
<span class="va">svr_kids</span> <span class="op">&lt;-</span> <span class="st">'kids'</span>

<span class="co"># Define other parameters</span>
<span class="va">fl_stimulus_child</span> <span class="op">&lt;-</span> <span class="fl">300</span>
<span class="va">fl_stimulus_adult_min</span> <span class="op">&lt;-</span> <span class="fl">300</span>
<span class="va">fl_stimulus_adult_max</span> <span class="op">&lt;-</span> <span class="fl">600</span>
<span class="va">fl_per_adult_phase_out</span> <span class="op">&lt;-</span> <span class="fl">75000</span>
<span class="va">fl_phase_out_per_dollar_income</span> <span class="op">&lt;-</span> <span class="fl">0.05</span>

<span class="co"># fl_stimulus_child &lt;- ls_stimulus_specs$fl_stimulus_child</span>
<span class="co"># fl_stimulus_adult_min &lt;- ls_stimulus_specs$fl_stimulus_adult_min</span>
<span class="co"># fl_stimulus_adult_max &lt;- ls_stimulus_specs$fl_stimulus_adult_max</span>
<span class="co"># fl_per_adult_phase_out &lt;- ls_stimulus_specs$fl_per_adult_phase_out</span>
<span class="co"># fl_phase_out_per_dollar_income &lt;- ls_stimulus_specs$fl_phase_out_per_dollar_income</span>

<span class="co"># Compute stimulus, averaging over array of income-specific stimulus</span>
<span class="va">df_id</span> <span class="op">&lt;-</span> <span class="va">df_id</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_id</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/do.html" class="external-link">do</a></span><span class="op">(</span>bush_rebate <span class="op">=</span> 
       <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="fu"><a href="../reference/ffp_snw_stimulus_checks_bush.html">ffp_snw_stimulus_checks_bush</a></span><span class="op">(</span>
         ar_income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="va">.</span><span class="op">[[</span><span class="st">'y_group_min'</span><span class="op">]</span><span class="op">]</span>,
                         <span class="va">.</span><span class="op">[[</span><span class="st">'y_group_max'</span><span class="op">]</span><span class="op">]</span>, 
                         length.out<span class="op">=</span><span class="fl">100</span><span class="op">)</span>,
         it_kids <span class="op">=</span> <span class="va">.</span><span class="op">[[</span><span class="va">svr_kids</span><span class="op">]</span><span class="op">]</span>, 
         bl_marital <span class="op">=</span> <span class="va">.</span><span class="op">[[</span><span class="va">svr_marital</span><span class="op">]</span><span class="op">]</span>,
         fl_stimulus_child<span class="op">=</span><span class="va">fl_stimulus_child</span>,
         fl_stimulus_adult_min<span class="op">=</span><span class="va">fl_stimulus_adult_min</span>,
         fl_stimulus_adult_max<span class="op">=</span><span class="va">fl_stimulus_adult_max</span>,
         fl_per_adult_phase_out<span class="op">=</span><span class="va">fl_per_adult_phase_out</span>,
         fl_phase_out_per_dollar_income<span class="op">=</span><span class="va">fl_phase_out_per_dollar_income</span>
       <span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">bush_rebate</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>bush_rebate_n_checks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">bush_rebate</span><span class="op">/</span><span class="va">fl_percheck_dollar</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">df_id</span>, by<span class="op">=</span><span class="va">svr_id</span><span class="op">)</span>

<span class="co"># Display results</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_id</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 111 x 11</span></span>
<span class="co">##     id_i bush_rebate bush_rebate_n_c~ marital  kids age_group ymin_group    mass</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     1       409.                 4       0     0 (17,64]   (0,0.363]  3.17<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     2       600                  6       0     0 (17,64]   (0.363,0.~ 6.06<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     3       600                  6       0     0 (17,64]   (0.544,0.~ 9.94<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     4       600                  6       0     0 (17,64]   (0.725,0.~ 4.37<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     5       600                  6       0     0 (17,64]   (0.907,1.~ 5.08<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     6       600                  6       0     0 (17,64]   (1.09,1.2~ 2.18<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     7       398.                 4       0     0 (17,64]   (1.27,1.4~ 1.91<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     8        19.5                0       0     0 (17,64]   (1.45,1.6~ 3.07<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     9         0                  0       0     0 (17,64]   (1.63,1.8~ 9.42<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>    10         0                  0       0     0 (17,64]   (1.81,1.9~ 1.19<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #949494;"># ... with 101 more rows, and 3 more variables: hhsize &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   y_group_min &lt;dbl&gt;, y_group_max &lt;dbl&gt;</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="test-the-function">Test the Function<a class="anchor" aria-label="anchor" href="#test-the-function"></a>
</h3>
<p>Now we test the function <em>ffp_snw_stimulus_checks_bush_add2dfid()</em>.</p>
<div class="section level4">
<h4 id="test-actual-stimulus-allocation">Test Actual Stimulus Allocation<a class="anchor" aria-label="anchor" href="#test-actual-stimulus-allocation"></a>
</h4>
<p>First, we add in the actual policy bounds:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Call and solve</span>
<span class="va">df_id</span> <span class="op">&lt;-</span> <span class="va">df_nsw_tiny_chk168_df_id</span>
<span class="va">df_id_checkadded_actual</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ffp_snw_stimulus_checks_bush_add2dfid.html">ffp_snw_stimulus_checks_bush_add2dfid</a></span><span class="op">(</span>
  <span class="va">df_id</span>,
  it_income_n_in_seg <span class="op">=</span> <span class="fl">100</span>,
  fl_multiple <span class="op">=</span> <span class="fl">58056</span>,
  fl_percheck_dollar <span class="op">=</span> <span class="fl">100</span>,
  fl_stimulus_child<span class="op">=</span><span class="fl">300</span>,
  fl_stimulus_adult_min<span class="op">=</span><span class="fl">300</span>, fl_stimulus_adult_max<span class="op">=</span><span class="fl">600</span>,
  fl_per_adult_phase_out<span class="op">=</span><span class="fl">75000</span>,
  fl_phase_out_per_dollar_income<span class="op">=</span><span class="fl">0.05</span><span class="op">)</span>
<span class="co"># Display</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_id_checkadded_actual</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 x 11</span></span>
<span class="co">##     id_i bush_rebate bush_rebate_n_c~ marital  kids age_group ymin_group    mass</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     1       409.                 4       0     0 (17,64]   (0,0.363]  3.17<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     2       600                  6       0     0 (17,64]   (0.363,0.~ 6.06<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     3       600                  6       0     0 (17,64]   (0.544,0.~ 9.94<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     4       600                  6       0     0 (17,64]   (0.725,0.~ 4.37<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     5       600                  6       0     0 (17,64]   (0.907,1.~ 5.08<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     6       600                  6       0     0 (17,64]   (1.09,1.2~ 2.18<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     7       398.                 4       0     0 (17,64]   (1.27,1.4~ 1.91<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     8        19.5                0       0     0 (17,64]   (1.45,1.6~ 3.07<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     9         0                  0       0     0 (17,64]   (1.63,1.8~ 9.42<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>    10         0                  0       0     0 (17,64]   (1.81,1.9~ 1.19<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #949494;"># ... with 3 more variables: hhsize &lt;dbl&gt;, y_group_min &lt;dbl&gt;, y_group_max &lt;dbl&gt;</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Summarize</span>
<span class="va">vars.group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'kids'</span>, <span class="st">'marital'</span><span class="op">)</span>
<span class="va">var.numeric</span> <span class="op">&lt;-</span> <span class="st">'bush_rebate'</span>
<span class="va">str.stats.group</span> <span class="op">&lt;-</span> <span class="st">'allperc'</span>
<span class="va">ar.perc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.05</span>, <span class="fl">0.10</span>, <span class="fl">0.20</span>, <span class="fl">0.30</span>, <span class="fl">0.40</span>, <span class="fl">0.50</span>, <span class="fl">0.70</span>, <span class="fl">0.90</span><span class="op">)</span>
<span class="va">ls_summ_by_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://fanwangecon.github.io/REconTools/reference/ff_summ_bygroup.html" class="external-link">ff_summ_bygroup</a></span><span class="op">(</span><span class="va">df_id_checkadded_actual</span>, 
                                    <span class="va">vars.group</span>, <span class="va">var.numeric</span>, <span class="va">str.stats.group</span>, <span class="va">ar.perc</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning: `funs()` was deprecated in dplyr 0.8.0.</span>
<span class="co">## Please use a list of either functions or lambdas: </span>
<span class="co">## </span>
<span class="co">##   # Simple named list: </span>
<span class="co">##   list(mean = mean, median = median)</span>
<span class="co">## </span>
<span class="co">##   # Auto named with `tibble::lst()`: </span>
<span class="co">##   tibble::lst(mean, median)</span>
<span class="co">## </span>
<span class="co">##   # Using lambdas</span>
<span class="co">##   list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</span>
<span class="co">## <span style="color: #555555;">This warning is displayed once every 8 hours.</span></span>
<span class="co">## <span style="color: #555555;">Call `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.</span></span></code></pre>
<pre><code><span class="co">## Warning: attributes are not identical across measure variables;</span>
<span class="co">## they will be dropped</span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_table_grp_stats</span> <span class="op">&lt;-</span> <span class="va">ls_summ_by_group</span><span class="op">$</span><span class="va">df_table_grp_stats</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">df_table_grp_stats</span>,<span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">vars.group</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span>
          <span class="st">'mean'</span>, <span class="st">'1%'</span>, <span class="st">'5%'</span>, <span class="st">'10%'</span>, <span class="st">'20%'</span>, <span class="st">'30%'</span>, <span class="st">'50%'</span>, <span class="st">'90%'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Note: Using an external vector in selections is ambiguous.</span>
<span class="co">## <span style="color: #0000BB;">i</span> Use `all_of(vars.group)` instead of `vars.group` to silence this message.</span>
<span class="co">## <span style="color: #0000BB;">i</span> See &lt;https://tidyselect.r-lib.org/reference/faq-external-vector.html&gt;.</span>
<span class="co">## <span style="color: #555555;">This message is displayed once per session.</span></span></code></pre>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 x 10</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   kids [3]</span></span>
<span class="co">##    kids marital  mean  `1%`  `5%` `10%` `20%` `30%` `50%` `90%`</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span>     0       0   213     0     0     0     0     0     0   600</span>
<span class="co">## <span style="color: #BCBCBC;">2</span>     0       1   860     0     0     0   357   707  <span style="text-decoration: underline;">1</span>200  <span style="text-decoration: underline;">1</span>200</span>
<span class="co">## <span style="color: #BCBCBC;">3</span>     1       0   334     0     0     0     0     0     0   900</span>
<span class="co">## <span style="color: #BCBCBC;">4</span>     1       1  <span style="text-decoration: underline;">1</span>099     0     0     3   634   934  <span style="text-decoration: underline;">1</span>500  <span style="text-decoration: underline;">1</span>500</span>
<span class="co">## <span style="color: #BCBCBC;">5</span>     2       0   465     0     0     0     0     0    23  <span style="text-decoration: underline;">1</span>200</span>
<span class="co">## <span style="color: #BCBCBC;">6</span>     2       1  <span style="text-decoration: underline;">1</span>348     0     0    99   934  <span style="text-decoration: underline;">1</span>201  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800</span></code></pre>
</div>
<div class="section level4">
<h4 id="test-tripling-tax-rebate-bound-for-higher-income-households">Test Tripling Tax Rebate Bound for Higher Income Households<a class="anchor" aria-label="anchor" href="#test-tripling-tax-rebate-bound-for-higher-income-households"></a>
</h4>
<p>Second, we will triple the amount of stimulus received for adult and for kids, but keep the base amount the same, and set phase-out per_dollar income to 0. By doing this, we are no longer finding the stimulus under the actual policy, but generating upper allocation bounds based on tax-liability.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Child stimulus triple</span>
<span class="va">fl_stimulus_child</span><span class="op">=</span><span class="fl">300</span><span class="op">*</span><span class="fl">3</span>
<span class="va">fl_stimulus_adult_max</span><span class="op">=</span><span class="fl">600</span><span class="op">*</span><span class="fl">3</span>
<span class="va">fl_phase_out_per_dollar_income</span><span class="op">=</span><span class="fl">0</span>
<span class="co"># Call and solve</span>
<span class="va">df_id</span> <span class="op">&lt;-</span> <span class="va">df_nsw_tiny_chk168_df_id</span>
<span class="va">df_id_checkadded_x3chd_x3adthgbd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ffp_snw_stimulus_checks_bush_add2dfid.html">ffp_snw_stimulus_checks_bush_add2dfid</a></span><span class="op">(</span>
  <span class="va">df_id</span>,
  fl_multiple <span class="op">=</span> <span class="fl">58056</span>,
  fl_percheck_dollar <span class="op">=</span> <span class="fl">100</span>,
  fl_stimulus_child<span class="op">=</span><span class="va">fl_stimulus_child</span>,
  fl_stimulus_adult_min<span class="op">=</span><span class="fl">300</span>, fl_stimulus_adult_max<span class="op">=</span><span class="va">fl_stimulus_adult_max</span>,
  fl_phase_out_per_dollar_income<span class="op">=</span><span class="va">fl_phase_out_per_dollar_income</span><span class="op">)</span>
<span class="co"># Display</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_id_checkadded_x3chd_x3adthgbd</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 x 11</span></span>
<span class="co">##     id_i bush_rebate bush_rebate_n_c~ marital  kids age_group ymin_group    mass</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     1        521.                5       0     0 (17,64]   (0,0.363]  3.17<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     2       <span style="text-decoration: underline;">1</span>752.               18       0     0 (17,64]   (0.363,0.~ 6.06<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     3       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (0.544,0.~ 9.94<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     4       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (0.725,0.~ 4.37<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     5       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (0.907,1.~ 5.08<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     6       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.09,1.2~ 2.18<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     7       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.27,1.4~ 1.91<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     8       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.45,1.6~ 3.07<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     9       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.63,1.8~ 9.42<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>    10       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.81,1.9~ 1.19<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #949494;"># ... with 3 more variables: hhsize &lt;dbl&gt;, y_group_min &lt;dbl&gt;, y_group_max &lt;dbl&gt;</span></span></code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Summarize</span>
<span class="va">ls_summ_by_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://fanwangecon.github.io/REconTools/reference/ff_summ_bygroup.html" class="external-link">ff_summ_bygroup</a></span><span class="op">(</span><span class="va">df_id_checkadded_x3chd_x3adthgbd</span>, 
                                    <span class="va">vars.group</span>, <span class="va">var.numeric</span>, <span class="va">str.stats.group</span>, <span class="va">ar.perc</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning: attributes are not identical across measure variables;</span>
<span class="co">## they will be dropped</span></code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_table_grp_stats</span> <span class="op">&lt;-</span> <span class="va">ls_summ_by_group</span><span class="op">$</span><span class="va">df_table_grp_stats</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">df_table_grp_stats</span>,<span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">vars.group</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span>
          <span class="st">'mean'</span>, <span class="st">'1%'</span>, <span class="st">'5%'</span>, <span class="st">'10%'</span>, <span class="st">'20%'</span>, <span class="st">'30%'</span>, <span class="st">'50%'</span>, <span class="st">'90%'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 x 10</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   kids [3]</span></span>
<span class="co">##    kids marital  mean  `1%`  `5%` `10%` `20%` `30%` `50%` `90%`</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span>     0       0  <span style="text-decoration: underline;">1</span>726   730  <span style="text-decoration: underline;">1</span>567  <span style="text-decoration: underline;">1</span>786  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800</span>
<span class="co">## <span style="color: #BCBCBC;">2</span>     0       1  <span style="text-decoration: underline;">3</span>208   651   854  <span style="text-decoration: underline;">1</span>818  <span style="text-decoration: underline;">3</span>524  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600</span>
<span class="co">## <span style="color: #BCBCBC;">3</span>     1       0  <span style="text-decoration: underline;">2</span>584  <span style="text-decoration: underline;">1</span>371  <span style="text-decoration: underline;">1</span>961  <span style="text-decoration: underline;">2</span>517  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>700</span>
<span class="co">## <span style="color: #BCBCBC;">4</span>     1       1  <span style="text-decoration: underline;">4</span>055  <span style="text-decoration: underline;">1</span>515  <span style="text-decoration: underline;">1</span>576  <span style="text-decoration: underline;">2</span>313  <span style="text-decoration: underline;">4</span>287  <span style="text-decoration: underline;">4</span>500  <span style="text-decoration: underline;">4</span>500  <span style="text-decoration: underline;">4</span>500</span>
<span class="co">## <span style="color: #BCBCBC;">5</span>     2       0  <span style="text-decoration: underline;">3</span>458  <span style="text-decoration: underline;">2</span>183  <span style="text-decoration: underline;">2</span>517  <span style="text-decoration: underline;">3</span>259  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600</span>
<span class="co">## <span style="color: #BCBCBC;">6</span>     2       1  <span style="text-decoration: underline;">4</span>903  <span style="text-decoration: underline;">2</span>400  <span style="text-decoration: underline;">2</span>402  <span style="text-decoration: underline;">2</span>878  <span style="text-decoration: underline;">4</span>976  <span style="text-decoration: underline;">5</span>400  <span style="text-decoration: underline;">5</span>400  <span style="text-decoration: underline;">5</span>400</span></code></pre>
</div>
<div class="section level4">
<h4 id="test-tripling-tax-rebate-bound-for-higher-income-households-and-tripling-upper-bound-for-lower-income-households-as-well">Test Tripling Tax Rebate Bound for Higher Income Households and Tripling Upper Bound for Lower Income Households As Well<a class="anchor" aria-label="anchor" href="#test-tripling-tax-rebate-bound-for-higher-income-households-and-tripling-upper-bound-for-lower-income-households-as-well"></a>
</h4>
<p>Third, we will triple the amount of stimulus received for adult and for kids, and also triple the base amount (upper-bound) for lowest income group, and set phase-out per_dollar income to 0.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Child stimulus triple</span>
<span class="va">fl_stimulus_child</span><span class="op">=</span><span class="fl">300</span><span class="op">*</span><span class="fl">3</span>
<span class="va">fl_stimulus_adult_max</span><span class="op">=</span><span class="fl">600</span><span class="op">*</span><span class="fl">3</span>
<span class="va">fl_stimulus_adult_min</span><span class="op">=</span><span class="fl">300</span><span class="op">*</span><span class="fl">3</span>
<span class="va">fl_phase_out_per_dollar_income</span><span class="op">=</span><span class="fl">0</span>
<span class="co"># Call and solve</span>
<span class="va">df_id</span> <span class="op">&lt;-</span> <span class="va">df_nsw_tiny_chk168_df_id</span>
<span class="va">df_id_checkadded_x3chd_x3adthgbdlwbd</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ffp_snw_stimulus_checks_bush_add2dfid.html">ffp_snw_stimulus_checks_bush_add2dfid</a></span><span class="op">(</span>
  <span class="va">df_id</span>,
  fl_multiple <span class="op">=</span> <span class="fl">58056</span>,
  fl_percheck_dollar <span class="op">=</span> <span class="fl">100</span>,
  fl_stimulus_child<span class="op">=</span><span class="va">fl_stimulus_child</span>,
  fl_stimulus_adult_min<span class="op">=</span><span class="va">fl_stimulus_adult_min</span>, fl_stimulus_adult_max<span class="op">=</span><span class="va">fl_stimulus_adult_max</span>,
  fl_phase_out_per_dollar_income<span class="op">=</span><span class="va">fl_phase_out_per_dollar_income</span><span class="op">)</span>
<span class="co"># Display</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">df_id_checkadded_x3chd_x3adthgbdlwbd</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 10 x 11</span></span>
<span class="co">##     id_i bush_rebate bush_rebate_n_c~ marital  kids age_group ymin_group    mass</span>
<span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>     1        945.                9       0     0 (17,64]   (0,0.363]  3.17<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>     2       <span style="text-decoration: underline;">1</span>752.               18       0     0 (17,64]   (0.363,0.~ 6.06<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>     3       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (0.544,0.~ 9.94<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>     4       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (0.725,0.~ 4.37<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>     5       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (0.907,1.~ 5.08<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>     6       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.09,1.2~ 2.18<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>     7       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.27,1.4~ 1.91<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>     8       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.45,1.6~ 3.07<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>     9       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.63,1.8~ 9.42<span style="color: #949494;">e</span><span style="color: #BB0000;">-4</span></span>
<span class="co">## <span style="color: #BCBCBC;">10</span>    10       <span style="text-decoration: underline;">1</span>800                18       0     0 (17,64]   (1.81,1.9~ 1.19<span style="color: #949494;">e</span><span style="color: #BB0000;">-2</span></span>
<span class="co">## <span style="color: #949494;"># ... with 3 more variables: hhsize &lt;dbl&gt;, y_group_min &lt;dbl&gt;, y_group_max &lt;dbl&gt;</span></span></code></pre>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Summarize</span>
<span class="va">ls_summ_by_group</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://fanwangecon.github.io/REconTools/reference/ff_summ_bygroup.html" class="external-link">ff_summ_bygroup</a></span><span class="op">(</span><span class="va">df_id_checkadded_x3chd_x3adthgbdlwbd</span>, 
                                    <span class="va">vars.group</span>, <span class="va">var.numeric</span>, <span class="va">str.stats.group</span>, <span class="va">ar.perc</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Warning: attributes are not identical across measure variables;</span>
<span class="co">## they will be dropped</span></code></pre>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_table_grp_stats</span> <span class="op">&lt;-</span> <span class="va">ls_summ_by_group</span><span class="op">$</span><span class="va">df_table_grp_stats</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">df_table_grp_stats</span>,<span class="fl">0</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">vars.group</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span>
          <span class="st">'mean'</span>, <span class="st">'1%'</span>, <span class="st">'5%'</span>, <span class="st">'10%'</span>, <span class="st">'20%'</span>, <span class="st">'30%'</span>, <span class="st">'50%'</span>, <span class="st">'90%'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 x 10</span></span>
<span class="co">## <span style="color: #949494;"># Groups:   kids [3]</span></span>
<span class="co">##    kids marital  mean  `1%`  `5%` `10%` `20%` `30%` `50%` `90%`</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span>     0       0  <span style="text-decoration: underline;">1</span>750  <span style="text-decoration: underline;">1</span>082  <span style="text-decoration: underline;">1</span>631  <span style="text-decoration: underline;">1</span>786  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800</span>
<span class="co">## <span style="color: #BCBCBC;">2</span>     0       1  <span style="text-decoration: underline;">3</span>323  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">1</span>800  <span style="text-decoration: underline;">2</span>069  <span style="text-decoration: underline;">3</span>524  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600</span>
<span class="co">## <span style="color: #BCBCBC;">3</span>     1       0  <span style="text-decoration: underline;">2</span>619  <span style="text-decoration: underline;">1</span>857  <span style="text-decoration: underline;">2</span>083  <span style="text-decoration: underline;">2</span>530  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>700</span>
<span class="co">## <span style="color: #BCBCBC;">4</span>     1       1  <span style="text-decoration: underline;">4</span>192  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>700  <span style="text-decoration: underline;">2</span>765  <span style="text-decoration: underline;">4</span>287  <span style="text-decoration: underline;">4</span>500  <span style="text-decoration: underline;">4</span>500  <span style="text-decoration: underline;">4</span>500</span>
<span class="co">## <span style="color: #BCBCBC;">5</span>     2       0  <span style="text-decoration: underline;">3</span>502  <span style="text-decoration: underline;">2</span>715  <span style="text-decoration: underline;">2</span>774  <span style="text-decoration: underline;">3</span>318  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600</span>
<span class="co">## <span style="color: #BCBCBC;">6</span>     2       1  <span style="text-decoration: underline;">5</span>061  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">3</span>600  <span style="text-decoration: underline;">4</span>976  <span style="text-decoration: underline;">5</span>400  <span style="text-decoration: underline;">5</span>400  <span style="text-decoration: underline;">5</span>400</span></code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://fanwangecon.github.io" class="external-link">Fan Wang</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
